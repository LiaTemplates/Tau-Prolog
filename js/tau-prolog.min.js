var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,u,w){a!=Array.prototype&&a!=Object.prototype&&(a[u]=w.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,u,w,q){if(u){w=$jscomp.global;a=a.split(".");for(q=0;q<a.length-1;q++){var p=a[q];p in w||(w[p]={});w=w[p]}a=a[a.length-1];q=w[a];u=u(q);u!=q&&null!=u&&$jscomp.defineProperty(w,a,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Number.EPSILON",function(a){return Math.pow(2,-52)},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");
$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6","es3");$jscomp.polyfill("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var u=0;return function(){return u<a.length?{done:!1,value:a[u++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,u){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var w=0,q={next:function(){if(w<a.length){var p=w++;return{value:u(p,a[p]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(){function a(a){var g=[],b=!1;a.replace(R,function(a,c,e,d,l,h,f,k,m,n,p,q,y,r,t,D,E){switch(!0){case void 0!==m:return g.push(parseInt(m,16)),"";case void 0!==n:return g.push(parseInt(n,8)),"";case void 0!==p:case void 0!==q:case void 0!==y:case void 0!==r:case void 0!==t:return g.push(L(a.substr(1),0)),"";case void 0!==E:return g.push(L(E,0)),"";case void 0!==D:b=!0;default:return g.push(S[a]),""}});return b?null:g}function u(a,c){var g="";if(2>a.length)return a;try{a=a.replace(/\\([0-7]+)\\/g,
function(a,g){return M(parseInt(g,8))}),a=a.replace(/\\x([0-9a-fA-F]+)\\/g,function(a,g){return M(parseInt(g,16))})}catch(V){return null}for(var e=0;e<a.length;e++){var d=a.charAt(e),N=a.charAt(e+1);if(d===c&&N===c)e++,g+=c;else if("\\"===d)if(-1!=="abfnrtv'\"\\a\b\f\n\r\t\x0B".split("").indexOf(N))switch(e+=1,N){case "a":g+="a";break;case "b":g+="\b";break;case "f":g+="\f";break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "v":g+="\v";break;case "'":g+="'";break;case '"':g+=
'"';break;case "\\":g+="\\"}else return null;else g+=d}return g}function w(g){var c=g.substr(2);switch(g.substr(0,2).toLowerCase()){case "0x":return parseInt(c,16);case "0b":return parseInt(c,2);case "0o":return parseInt(c,8);case "0'":return a(c)[0];default:return parseFloat(g)}}function q(a,c){return"on"===a.getFlag("char_conversion").id?c.replace(/./g,function(g){return a.getCharConversion(g)}):c}function p(a){this.thread=a;this.text="";this.tokens=[]}function m(a,c,b,v,K){if(!c[b])return{type:0,
value:e.error.syntax(c[b-1],"expression expected",!0)};if("0"===v){var g=c[b];switch(g.name){case "number":return{type:1,len:b+1,value:new e.type.Num(g.value,g.float)};case "variable":return{type:1,len:b+1,value:new e.type.Var(g.value)};case "string":switch(a.getFlag("double_quotes").id){case "atom":var h=new l(g.value,[]);break;case "codes":h=new l("[]",[]);for(a=g.value.length-1;0<=a;a--)h=new l(".",[new e.type.Num(L(g.value,a),!1),h]);break;case "chars":for(h=new l("[]",[]),a=g.value.length-1;0<=
a;a--)h=new l(".",[new e.type.Term(g.value.charAt(a),[]),h])}return{type:1,len:b+1,value:h};case "l_paren":var f=m(a,c,b+1,a.__get_max_priority(),!0);return 1!==f.type?f:c[f.len]&&"r_paren"===c[f.len].name?(f.len++,f):{type:0,derived:!0,value:e.error.syntax(c[f.len]?c[f.len]:c[f.len-1],") or operator expected",!c[f.len])};case "l_bracket":return f=m(a,c,b+1,a.__get_max_priority(),!0),1!==f.type?f:c[f.len]&&"r_bracket"===c[f.len].name?(f.len++,f.value=new l("{}",[f.value]),f):{type:0,derived:!0,value:e.error.syntax(c[f.len]?
c[f.len]:c[f.len-1],"} or operator expected",!c[f.len])}}g=d(a,c,b,K);if(1===g.type||g.derived)return g;g=k(a,c,b);return 1===g.type||g.derived?g:{type:0,derived:!1,value:e.error.syntax(c[b],"unexpected token")}}a.__get_max_priority();h=a.__get_next_priority(v);var n=b;if("atom"===c[b].name&&c[b+1]&&(c[b].space||"l_paren"!==c[b+1].name)){g=c[b++];var p=a.__lookup_operator_classes(v,g.value);if("-"===g.value&&(f=c[b])&&"number"===f.name)return{value:new e.type.Num("-"===g.value?-f.value:f.value,f.float),
len:++b,type:1};if(p&&-1<p.indexOf("fy")){if(f=m(a,c,b,v,K),0!==f.type)return{value:new e.type.Term(g.value,[f.value]),len:f.len,type:1}}else if(p&&-1<p.indexOf("fx")&&(f=m(a,c,b,h,K),0!==f.type))return{value:new e.type.Term(g.value,[f.value]),len:f.len,type:1}}f=m(a,c,n,h,K);if(1===f.type)if(b=f.len,g=c[b],c[b]&&("atom"===c[b].name&&a.__lookup_operator_classes(v,g.value)||"bar"===c[b].name&&a.__lookup_operator_classes(v,"|"))){p=a.__lookup_operator_classes(v,g.value);if(-1<p.indexOf("xf"))return{value:new e.type.Term(g.value,
[f.value]),len:++f.len,type:1};if(-1<p.indexOf("xfx")){n=m(a,c,b+1,h,K);if(1===n.type)return{value:new e.type.Term(g.value,[f.value,n.value]),len:n.len,type:1};n.derived=!0;return n}if(-1<p.indexOf("xfy")){n=m(a,c,b+1,v,K);if(1===n.type)return{value:new e.type.Term(g.value,[f.value,n.value]),len:n.len,type:1};n.derived=!0;return n}if(0!==f.type)for(;;)if(b=f.len,(g=c[b])&&"atom"===g.name&&a.__lookup_operator_classes(v,g.value))if(p=a.__lookup_operator_classes(v,g.value),-1<p.indexOf("yf"))f={value:new e.type.Term(g.value,
[f.value]),len:++b,type:1};else if(-1<p.indexOf("yfx")){n=m(a,c,++b,h,K);if(0===n.type)return n.derived=!0,n;b=n.len;f={value:new e.type.Term(g.value,[f.value,n.value]),len:b,type:1}}else break;else break}else e.error.syntax(c[f.len-1],"operator expected");return f}function d(a,c,b,v){if(!c[b]||"atom"===c[b].name&&"."===c[b].raw&&!v&&(c[b].space||!c[b+1]||"l_paren"!==c[b+1].name))return{type:0,derived:!1,value:e.error.syntax(c[b-1],"unfounded token")};v=c[b];var g=[];if("atom"===c[b].name&&","!==
c[b].raw){b++;if(c[b-1].space)return{type:1,len:b,value:new e.type.Term(v.value,g)};if(c[b]&&"l_paren"===c[b].name){if(c[b+1]&&"r_paren"===c[b+1].name)return{type:0,derived:!0,value:e.error.syntax(c[b+1],"argument expected")};var d=m(a,c,++b,"999",!0);if(0===d.type)return d.derived?d:{type:0,derived:!0,value:e.error.syntax(c[b]?c[b]:c[b-1],"argument expected",!c[b])};g.push(d.value);for(b=d.len;c[b]&&"atom"===c[b].name&&","===c[b].value;){d=m(a,c,b+1,"999",!0);if(0===d.type)return d.derived?d:{type:0,
derived:!0,value:e.error.syntax(c[b+1]?c[b+1]:c[b],"argument expected",!c[b+1])};g.push(d.value);b=d.len}if(c[b]&&"r_paren"===c[b].name)b++;else return{type:0,derived:!0,value:e.error.syntax(c[b]?c[b]:c[b-1],", or ) expected",!c[b])}}return{type:1,len:b,value:new e.type.Term(v.value,g)}}return{type:0,derived:!1,value:e.error.syntax(c[b],"term expected")}}function k(a,c,b){if(!c[b])return{type:0,derived:!1,value:e.error.syntax(c[b-1],"[ expected")};if(c[b]&&"l_brace"===c[b].name){var g=m(a,c,++b,"999",
!0),d=[g.value],h=void 0;if(0===g.type)return c[b]&&"r_brace"===c[b].name?{type:1,len:b+1,value:new e.type.Term("[]",[])}:{type:0,derived:!0,value:e.error.syntax(c[b],"] expected")};for(b=g.len;c[b]&&"atom"===c[b].name&&","===c[b].value;){g=m(a,c,b+1,"999",!0);if(0===g.type)return g.derived?g:{type:0,derived:!0,value:e.error.syntax(c[b+1]?c[b+1]:c[b],"argument expected",!c[b+1])};d.push(g.value);b=g.len}var f=!1;if(c[b]&&"bar"===c[b].name){f=!0;g=m(a,c,b+1,"999",!0);if(0===g.type)return g.derived?
g:{type:0,derived:!0,value:e.error.syntax(c[b+1]?c[b+1]:c[b],"argument expected",!c[b+1])};h=g.value;b=g.len}return c[b]&&"r_brace"===c[b].name?{type:1,len:b+1,value:D(d,h)}:{type:0,derived:!0,value:e.error.syntax(c[b]?c[b]:c[b-1],f?"] expected":", or | or ] expected",!c[b])}}return{type:0,derived:!1,value:e.error.syntax(c[b],"list expected")}}function h(a,c,b){var g=c[b].line,d=m(a,c,b,a.__get_max_priority(),!1);if(0!==d.type){b=d.len;if(c[b]&&"atom"===c[b].name&&"."===c[b].raw){b++;if(e.type.is_term(d.value)){if(":-/2"===
d.value.indicator)c=new e.type.Rule(d.value.args[0],y(d.value.args[1])),b={value:c,len:b,type:1};else if("--\x3e/2"===d.value.indicator){c=new e.type.Rule(d.value.args[0],d.value.args[1]);c=c.rename(a);d=a.next_free_variable();var h=n(c.body,d,a);h.error?c=h.value:(c.body=h.value,c.head.args=c.head.args.concat([d,h.variable]),c.head=new l(c.head.id,c.head.args));c.body=y(c.body);b={value:c,len:b,type:e.type.is_rule(c)?1:0}}else c=new e.type.Rule(d.value,null),b={value:c,len:b,type:1};c&&(d=c.singleton_variables(),
0<d.length&&a.throw_warning(e.warning.singleton(d,c.head.indicator,g)));return b}return{type:0,value:e.error.syntax(c[b],"callable expected")}}return{type:0,value:e.error.syntax(c[b]?c[b]:c[b-1],". or operator expected")}}return d}function f(a,c,b){b=b?b:{};b.from=b.from?b.from:"$tau-js";b.reconsult=void 0!==b.reconsult?b.reconsult:!0;var g=new p(a),d={};g.new_text(c);var f=0;c=g.get_tokens(f);do{if(null===c||!c[f])break;var k=h(a,c,f);if(0===k.type)return new l("throw",[k.value]);if(null===k.value.body&&
"?-/1"===k.value.head.indicator){f=new z(a.session);f.add_goal(k.value.head.args[0]);f.answer(function(g){e.type.is_error(g)?a.throw_warning(g.args[0]):(!1===g||null===g)&&a.throw_warning(e.warning.failed_goal(k.value.head.args[0],k.len))});f=k.len;var n=!0}else null===k.value.body&&":-/1"===k.value.head.indicator?(n=a.run_directive(k.value.head.args[0]),f=k.len,"char_conversion/2"===k.value.head.args[0].indicator&&(c=g.get_tokens(f),f=0)):(f=k.value.head.indicator,!1===b.reconsult||!0===d[f]||a.is_multifile_predicate(f)||
(a.session.rules[f]=T(a.session.rules[f]||[],function(a){return a.dynamic}),d[f]=!0),n=a.add_rule(k.value,b),f=k.len);if(!n)return n}while(1);return!0}function n(a,c,b){if(e.type.is_term(a)&&"!/0"===a.indicator)return{value:a,variable:c,error:!1};if(e.type.is_term(a)&&",/2"===a.indicator){c=n(a.args[0],c,b);if(c.error)return c;a=n(a.args[1],c.variable,b);return a.error?a:{value:new l(",",[c.value,a.value]),variable:a.variable,error:!1}}if(e.type.is_term(a)&&"{}/1"===a.indicator)return{value:a.args[0],
variable:c,error:!1};if(e.type.is_empty_list(a))return{value:new l("true",[]),variable:c,error:!1};if(e.type.is_list(a)){b=b.next_free_variable();for(var g=a,d;"./2"===g.indicator;)d=g,g=g.args[1];return e.type.is_variable(g)?{value:e.error.instantiation("DCG"),variable:c,error:!0}:e.type.is_empty_list(g)?(d.args[1]=b,{value:new l("=",[c,a]),variable:b,error:!1}):{value:e.error.type("list",a,"DCG"),variable:c,error:!0}}return e.type.is_callable(a)?(b=b.next_free_variable(),a.args=a.args.concat([c,
b]),a=new l(a.id,a.args),{value:a,variable:b,error:!1}):{value:e.error.type("callable",a,"DCG"),variable:c,error:!0}}function y(a){return e.type.is_variable(a)?new l("call",[a]):e.type.is_term(a)&&-1!==[",/2",";/2","->/2"].indexOf(a.indicator)?new l(a.id,[y(a.args[0]),y(a.args[1])]):a}function D(a,c){c=c?c:new e.type.Term("[]",[]);for(var g=a.length-1;0<=g;g--)c=new e.type.Term(".",[a[g],c]);return c}function E(a){for(var g={},b=[],e=0;e<a.length;e++)a[e]in g||(b.push(a[e]),g[a[e]]=!0);return b}function H(a){return function(g,
b,v){var c=v.args[0];v=v.args.slice(1,a);e.type.is_variable(c)?g.throwError(e.error.instantiation(g.level)):e.type.is_callable(c)?(c=new l(c.id,c.args.concat(v)),g.prepend([new r(b.goal.replace(c),b.substitution,b)])):g.throwError(e.error.type("callable",c,g.level))}}function G(a){for(var g=a.length-1;0<=g;g--)if("/"===a.charAt(g))return new l("/",[new l(a.substring(0,g)),new t(parseInt(a.substring(g+1)),!1)])}function x(a){this.id=a}function t(a,c){this.value=(this.is_float=void 0!==c?c:parseInt(a)!==
a)?a:parseInt(a)}function l(a,c,b){this.ref=b||++P;this.id=a;this.args=c||[];this.indicator=a+"/"+this.args.length}function B(a){this.links=a=a||{}}function r(a,c,b){c=c||new B;this.goal=a;this.substitution=c;this.parent=b||null}function F(a,c,b){this.head=a;this.body=c;this.dynamic=b?b:!1}function A(a){a=void 0===a||0>=a?1E3:a;this.rules={};this.src_predicates={};this.rename=0;this.modules=[];this.thread=new z(this);this.total_threads=1;this.renamed_variables={};this.public_predicates={};this.multifile_predicates=
{};this.limit=a;this.format_success=function(a){return a.substitution};this.format_error=function(a){return a.goal};this.flag={bounded:e.flag.bounded.value,max_integer:e.flag.max_integer.value,min_integer:e.flag.min_integer.value,integer_rounding_function:e.flag.integer_rounding_function.value,char_conversion:e.flag.char_conversion.value,debug:e.flag.debug.value,max_arity:e.flag.max_arity.value,unknown:e.flag.unknown.value,double_quotes:e.flag.double_quotes.value,occurs_check:e.flag.occurs_check.value,
dialect:e.flag.dialect.value,version_data:e.flag.version_data.value,nodejs:e.flag.nodejs.value};this.__loaded_modules=[];this.__char_conversion={};this.__operators={1200:{":-":["fx","xfx"],"--\x3e":["xfx"],"?-":["fx"]},1100:{";":["xfy"]},1050:{"->":["xfy"]},1E3:{",":["xfy"]},900:{"\\+":["fy"]},700:{"=":["xfx"],"\\=":["xfx"],"==":["xfx"],"\\==":["xfx"],"@<":["xfx"],"@=<":["xfx"],"@>":["xfx"],"@>=":["xfx"],"=..":["xfx"],is:["xfx"],"=:=":["xfx"],"=\\=":["xfx"],"<":["xfx"],"=<":["xfx"],">":["xfx"],">=":["xfx"]},
600:{":":["xfy"]},500:{"+":["yfx"],"-":["yfx"],"/\\":["yfx"],"\\/":["yfx"]},400:{"*":["yfx"],"/":["yfx"],"//":["yfx"],rem:["yfx"],mod:["yfx"],"<<":["yfx"],">>":["yfx"]},200:{"**":["xfx"],"^":["xfy"],"-":["fy"],"+":["fy"],"\\":["fy"]}}}function z(a){this.epoch=Date.now();this.session=a;this.session.total_threads++;this.cpu_time_last=this.cpu_time=this.total_steps=0;this.points=[];this.debugger=!1;this.debugger_states=[];this.level="top_level/0";this.__calls=[];this.current_limit=this.session.limit;
this.warnings=[]}function Q(a,c,b){this.id=a;this.rules=c;this.exports=b;e.module[a]=this}var I={major:0,minor:2,patch:56,status:"beta"};var C=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var g=a.length,e=0;e<g;e++)if(c===a[e])return e;return-1};var U=function(a,c){if(0!==a.length){for(var g=a[0],e=a.length,d=1;d<e;d++)g=c(g,a[d]);return g}};var J=Array.prototype.map?function(a,c){return a.map(c)}:function(a,c){for(var g=[],e=a.length,d=0;d<e;d++)g.push(c(a[d]));return g};
var T=Array.prototype.filter?function(a,c){return a.filter(c)}:function(a,c){for(var g=[],e=a.length,d=0;d<e;d++)c(a[d])&&g.push(a[d]);return g};var L=String.prototype.codePointAt?function(a,c){return a.codePointAt(c)}:function(a,c){return a.charCodeAt(c)};var M=String.fromCodePoint?function(){return String.fromCodePoint.apply(null,arguments)}:function(){return String.fromCharCode.apply(null,arguments)};var R=/(\\a)|(\\b)|(\\f)|(\\n)|(\\r)|(\\t)|(\\v)|\\x([0-9a-fA-F]+)\\|\\([0-7]+)\\|(\\\\)|(\\')|('')|(\\")|(\\`)|(\\.)|(.)/g,
S={"\\a":7,"\\b":8,"\\f":12,"\\n":10,"\\r":13,"\\t":9,"\\v":11},O={whitespace:/^\s*(?:(?:%.*)|(?:\/\*(?:\n|\r|.)*?\*\/)|(?:\s+))\s*/,variable:/^(?:[A-Z_][a-zA-Z0-9_]*)/,atom:/^(!|,|;|[a-z][0-9a-zA-Z_]*|[#\$&\*\+\-\.\/:<=>\?@\^~\\]+|'(?:[^']*?(?:\\(?:x?\d+)?\\)*(?:'')*(?:\\')*)*')/,number:/^(?:0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|[^\\])|\d+(?:\.\d+(?:[eE][+-]?\d+)?)?)/,string:/^(?:"([^"]|""|\\")*"|`([^`]|``|\\`)*`)/,l_brace:/^(?:\[)/,r_brace:/^(?:\])/,l_bracket:/^(?:\{)/,
r_bracket:/^(?:\})/,bar:/^(?:\|)/,l_paren:/^(?:\()/,r_paren:/^(?:\))/};p.prototype.set_last_tokens=function(a){return this.tokens=a};p.prototype.new_text=function(a){this.text=a;this.tokens=[]};p.prototype.get_tokens=function(a){var g=0,b=0,e=0,d=[];if(a){var f=this.tokens[a-1];g=f.len;a=q(this.thread,this.text.substr(f.len));b=f.line;e=f.start}else a=this.text;if(/^\s*$/.test(a))return null;for(;""!==a;){f=[];var h=!1;if(null!==/^\n/.exec(a))b++,e=0,g++,a=a.replace(/\n/,"");else{for(var l in O)if(O.hasOwnProperty(l)){var k=
O[l].exec(a);k&&f.push({value:k[0],name:l,matches:k})}if(!f.length)return this.set_last_tokens([{value:a,matches:[],name:"lexical",line:b,start:e}]);f=U(f,function(a,g){return a.value.length>=g.value.length?a:g});f.start=e;f.line=b;a=a.replace(f.value,"");e+=f.value.length;g+=f.value.length;switch(f.name){case "atom":f.raw=f.value;"'"===f.value.charAt(0)&&(f.value=u(f.value.substr(1,f.value.length-2),"'"),null===f.value&&(f.name="lexical",f.value="unknown escape sequence"));break;case "number":f.float=
null!==f.value.match(/[.eE]/)&&"0'."!==f.value;f.value=w(f.value);f.blank=h;break;case "string":h=f.value.charAt(0);f.value=u(f.value.substr(1,f.value.length-2),h);null===f.value&&(f.name="lexical",f.value="unknown escape sequence");break;case "whitespace":if(h=d[d.length-1])h.space=!0;h=!0;continue;case "r_bracket":0<d.length&&"l_bracket"===d[d.length-1].name&&(f=d.pop(),f.name="atom",f.value="{}",f.raw="{}",f.space=!1);break;case "r_brace":0<d.length&&"l_brace"===d[d.length-1].name&&(f=d.pop(),
f.name="atom",f.value="[]",f.raw="[]",f.space=!1)}f.len=g;d.push(f);h=!1}}g=this.set_last_tokens(d);return 0===g.length?null:g};var P=0;Q.prototype.exports_predicate=function(a){return-1!==this.exports.indexOf(a)};x.prototype.toString=function(){return this.id};t.prototype.toString=function(){return this.is_float&&-1===C(this.value.toString(),".")?this.value+".0":this.value.toString()};l.prototype.toString=function(){switch(this.indicator){case "[]/0":case "{}/0":case "!/0":return this.id;case "{}/1":return"{"+
this.args[0].toString()+"}";case "./2":for(var a="["+this.args[0].toString(),c=this.args[1];"./2"===c.indicator;)a+=", "+c.args[0].toString(),c=c.args[1];"[]/0"!==c.indicator&&(a+="|"+c.toString());return a+"]";case ",/2":return"("+this.args[0].toString()+", "+this.args[1].toString()+")";default:a=this.id;if(!/^(!|,|;|[a-z][0-9a-zA-Z_]*)$/.test(a)&&"{}"!==a&&"[]"!==a){c="";for(var b=0;b<a.length;b++)switch(a.charAt(b)){case "'":c+="\\'";break;case "\\":c+="\\\\";break;case "\b":c+="\\b";break;case "\f":c+=
"\\f";break;case "\n":c+="\\n";break;case "\r":c+="\\r";break;case "\t":c+="\\t";break;case "\v":c+="\\v";break;default:c+=a.charAt(b)}a="'"+c+"'"}return a+(this.args.length?"("+this.args.join(", ")+")":"")}};B.prototype.toString=function(){var a="{",c;for(c in this.links)this.links.hasOwnProperty(c)&&("{"!==a&&(a+=", "),a+=c+"/"+this.links[c].toString());return a+"}"};r.prototype.toString=function(){return null===this.goal?"<"+this.substitution.toString()+">":"<"+this.goal.toString()+", "+this.substitution.toString()+
">"};F.prototype.toString=function(){return this.body?this.head+" :- "+this.body+".":this.head+"."};A.prototype.toString=function(){for(var a="",c=0;c<this.modules.length;c++)a+=":- use_module(library("+this.modules[c]+")).\n";a+="\n";for(key in this.rules)for(c=0;c<this.rules[key].length;c++)a+=this.rules[key][c].toString(),a+="\n";return a};x.prototype.clone=function(){return new x(this.id)};t.prototype.clone=function(){return new t(this.value,this.is_float)};l.prototype.clone=function(){return new l(this.id,
J(this.args,function(a){return a.clone()}))};B.prototype.clone=function(){var a={},c;for(c in this.links)this.links.hasOwnProperty(c)&&(a[c]=this.links[c].clone());return new B(a)};r.prototype.clone=function(){return new r(this.goal.clone(),this.substitution.clone(),this.parent)};F.prototype.clone=function(){return new F(this.head.clone(),null!==this.body?this.body.clone():null)};x.prototype.equals=function(a){return e.type.is_variable(a)&&this.id===a.id};t.prototype.equals=function(a){return e.type.is_number(a)&&
this.value===a.value&&this.is_float===a.is_float};l.prototype.equals=function(a){if(!e.type.is_term(a)||this.indicator!==a.indicator)return!1;for(var g=0;g<this.args.length;g++)if(!this.args[g].equals(a.args[g]))return!1;return!0};B.prototype.equals=function(a){var g;if(!e.type.is_substitution(a))return!1;for(g in this.links)if(this.links.hasOwnProperty(g)&&(!a.links[g]||!this.links[g].equals(a.links[g])))return!1;for(g in a.links)if(a.links.hasOwnProperty(g)&&!this.links[g])return!1;return!0};r.prototype.equals=
function(a){return e.type.is_state(a)&&this.goal.equals(a.goal)&&this.substitution.equals(a.substitution)&&this.parent===a.parent};F.prototype.equals=function(a){return e.type.is_rule(a)&&this.head.equals(a.head)&&(null===this.body&&null===a.body||null!==this.body&&this.body.equals(a.body))};x.prototype.rename=function(a){return a.get_free_variable(this)};t.prototype.rename=function(a){return this};l.prototype.rename=function(a){return new l(this.id,J(this.args,function(g){return g.rename(a)}))};
F.prototype.rename=function(a){return new F(this.head.rename(a),null!==this.body?this.body.rename(a):null)};x.prototype.variables=function(){return[this.id]};t.prototype.variables=function(){return[]};l.prototype.variables=function(){return[].concat.apply([],J(this.args,function(a){return a.variables()}))};F.prototype.variables=function(){return null===this.body?this.head.variables():this.head.variables().concat(this.body.variables())};x.prototype.apply=function(a){return a.lookup(this.id)?a.lookup(this.id):
this};t.prototype.apply=function(a){return this};l.prototype.apply=function(a){return new l(this.id,J(this.args,function(g){return g.apply(a)}),this.ref)};F.prototype.apply=function(a){return new F(this.head.apply(a),null!==this.body?this.body.apply(a):null)};B.prototype.apply=function(a){var g,b={};for(g in this.links)this.links.hasOwnProperty(g)&&(b[g]=this.links[g].apply(a));return new B(b)};x.prototype.unify=function(a,c){if(c&&-1!==C(a.variables(),this.id)&&!e.type.is_variable(a))return null;
c={};c[this.id]=a;return new r(a,new B(c))};t.prototype.unify=function(a,c){return e.type.is_number(a)&&this.value===a.value&&this.is_float===a.is_float?new r(a,new B):null};l.prototype.unify=function(a,c){if(e.type.is_term(a)&&this.indicator===a.indicator){for(var g=new B,d=0;d<this.args.length;d++){var f=e.unify(this.args[d].apply(g),a.args[d].apply(g),c);if(null===f)return null;for(var h in f.substitution.links)g.links[h]=f.substitution.links[h];g=g.apply(f.substitution)}return new r(this.apply(g),
g)}return null};l.prototype.select=function(){return",/2"===this.indicator?this.args[0].select():this};l.prototype.replace=function(a){return",/2"===this.indicator?",/2"===this.args[0].indicator?new l(",",[this.args[0].replace(a),this.args[1]]):null===a?this.args[1]:new l(",",[a,this.args[1]]):a};l.prototype.search=function(a){if(e.type.is_term(a)&&void 0!==a.ref&&this.ref===a.ref)return!0;for(var g=0;g<this.args.length;g++)if(e.type.is_term(this.args[g])&&this.args[g].search(a))return!0;return!1};
A.prototype.getCharConversion=function(a){return this.__char_conversion[a]||a};z.prototype.getCharConversion=function(a){return this.session.getCharConversion(a)};A.prototype.parse=function(a){return this.thread.parse(a)};z.prototype.parse=function(a){var g=new p(this);g.new_text(a);a=g.get_tokens();if(null===a)return!1;g=m(this,a,0,this.__get_max_priority(),!1);return g.len!==a.length?!1:{value:g.value,expr:g,tokens:a}};A.prototype.getFlag=function(a){return this.flag[a]};z.prototype.getFlag=function(a){return this.session.getFlag(a)};
A.prototype.add_rule=function(a,c){c=c?c:{};c.from=c.from?c.from:"$tau-js";this.src_predicates[a.head.indicator]=c.from;this.rules[a.head.indicator]||(this.rules[a.head.indicator]=[]);this.rules[a.head.indicator].push(a);this.public_predicates.hasOwnProperty(a.head.indicator)||(this.public_predicates[a.head.indicator]=!1);return!0};z.prototype.add_rule=function(a,c){return this.session.add_rule(a,c)};A.prototype.run_directive=function(a){this.thread.run_directive(a)};z.prototype.run_directive=function(a){return e.type.is_directive(a)?
(e.directive[a.indicator](this,a),!0):!1};A.prototype.__get_max_priority=function(){return"1200"};z.prototype.__get_max_priority=function(){return this.session.__get_max_priority()};A.prototype.__get_next_priority=function(a){var g=0;a=parseInt(a);for(var b in this.__operators)if(this.__operators.hasOwnProperty(b)){var e=parseInt(b);e>g&&e<a&&(g=e)}return g.toString()};z.prototype.__get_next_priority=function(a){return this.session.__get_next_priority(a)};A.prototype.__lookup_operator_classes=function(a,
c){return this.__operators.hasOwnProperty(a)&&this.__operators[a][c]instanceof Array?this.__operators[a][c]||!1:!1};z.prototype.__lookup_operator_classes=function(a,c){return this.session.__lookup_operator_classes(a,c)};A.prototype.throw_warning=function(a){this.thread.throw_warning(a)};z.prototype.throw_warning=function(a){this.warnings.push(a)};A.prototype.getWarnings=function(){return this.thread.getWarnings()};z.prototype.getWarnings=function(){return this.warnings};A.prototype.add_goal=function(a,
c){this.thread.add_goal(a,c)};z.prototype.add_goal=function(a,c,b){b=b?b:null;!0===c&&(this.points=[]);c=a.variables();for(var g={},e=0;e<c.length;e++)g[c[e]]=new x(c[e]);this.points.push(new r(a,new B(g),b))};A.prototype.consult=function(a,c){return this.thread.consult(a,c)};z.prototype.consult=function(a,c){if("string"===typeof a){var g=a.length;if(".pl"===a.substring(g-3,g)&&document.getElementById(a)){g=document.getElementById(a);var e=g.getAttribute("type");null!==e&&"text/prolog"===e.replace(/ /g,
"").toLowerCase()&&(a=g.text)}}else if(a.nodeName)switch(a.nodeName.toLowerCase()){case "input":case "textarea":a=a.value;break;default:a=a.innerHTML}else return!1;this.warnings=[];return f(this,a,c)};A.prototype.query=function(a){return this.thread.query(a)};z.prototype.query=function(a){this.points=[];this.debugger_points=[];a:{var g=new p(this);g.new_text(a);a=0;do{a=g.get_tokens(a);if(null===a)break;var b=m(this,a,0,this.__get_max_priority(),!1);if(0!==b.type){var d=b.len;if(a[d]&&"atom"===a[d].name&&
"."===a[d].raw)this.add_goal(y(b.value));else{g=a[d];g=new l("throw",[e.error.syntax(g?g:a[d-1],". or operator expected",!g)]);break a}a=b.len+1}else{g=new l("throw",[b.value]);break a}}while(1);g=!0}return g};A.prototype.get_free_variable=function(a){return this.thread.get_free_variable(a)};z.prototype.get_free_variable=function(a){var g=[];if("_"===a.id||void 0===this.session.renamed_variables[a.id]){this.session.rename++;for(0<this.points.length&&(g=this.points[0].substitution.domain());-1!==C(g,
e.format_variable(this.session.rename));)this.session.rename++;if("_"===a.id)return new x(e.format_variable(this.session.rename));this.session.renamed_variables[a.id]=e.format_variable(this.session.rename)}return new x(this.session.renamed_variables[a.id])};A.prototype.next_free_variable=function(){return this.thread.next_free_variable()};z.prototype.next_free_variable=function(){this.session.rename++;var a=[];for(0<this.points.length&&(a=this.points[0].substitution.domain());-1!==C(a,e.format_variable(this.session.rename));)this.session.rename++;
return new x(e.format_variable(this.session.rename))};A.prototype.is_public_predicate=function(a){return!this.public_predicates.hasOwnProperty(a)||!0===this.public_predicates[a]};z.prototype.is_public_predicate=function(a){return this.session.is_public_predicate(a)};A.prototype.is_multifile_predicate=function(a){return this.multifile_predicates.hasOwnProperty(a)&&!0===this.multifile_predicates[a]};z.prototype.is_multifile_predicate=function(a){return this.session.is_multifile_predicate(a)};A.prototype.prepend=
function(a){return this.thread.prepend(a)};z.prototype.prepend=function(a){this.points=a.concat(this.points)};A.prototype.success=function(a,c){return this.thread.success(a,c)};z.prototype.success=function(a,c){c="undefined"===typeof c?a:c;this.prepend([new r(a.goal.replace(null),a.substitution,c)])};A.prototype.throwError=function(a){return this.thread.throwError(a)};z.prototype.throwError=function(a){this.prepend([new r(new l("throw",[a]),new B,null,null)])};A.prototype.stepRule=function(a,c){return this.thread.stepRule(a,
c)};z.prototype.stepRule=function(a,c){c=c.indicator;"user"===a&&(a=null);if(null===a&&this.session.rules.hasOwnProperty(c))return this.session.rules[c];a=null===a?this.session.modules:-1===C(this.session.modules,a)?[]:[a];for(var g=0;g<a.length;g++){var d=e.module[a[g]];if(d.rules.hasOwnProperty(c)&&(d.rules.hasOwnProperty(this.level)||d.exports_predicate(c)))return e.module[a[g]].rules[c]}return null};A.prototype.step=function(){return this.thread.step()};z.prototype.step=function(){if(0!==this.points.length){var a=
!1,c=this.points.shift();this.debugger&&this.debugger_states.push(c);if(e.type.is_term(c.goal)){var b=c.goal.select(),d=null,f=[];if(null!==b){this.total_steps++;for(var h=c;null!==h.parent&&h.parent.goal.search(b);)h=h.parent;this.level=null===h.parent?"top_level/0":h.parent.goal.select().indicator;e.type.is_term(b)&&":/2"===b.indicator&&(d=b.args[0].id,b=b.args[1]);if(null===d&&e.type.is_builtin(b))this.__call_indicator=b.indicator,a=e.predicate[b.indicator](this,c,b);else if(d=this.stepRule(d,
b),null===d)this.session.rules.hasOwnProperty(b.indicator)||("error"===this.getFlag("unknown").id?this.throwError(e.error.existence("procedure",b.indicator,this.level)):"warning"===this.getFlag("unknown").id&&this.throw_warning("unknown procedure "+b.indicator+" (from "+this.level+")"));else if(d instanceof Function)a=d(this,c,b);else{for(var l in d)if(d.hasOwnProperty(l)){h=d[l];this.session.renamed_variables={};h=h.rename(this);var k="true/0"===this.getFlag("occurs_check").indicator;k=e.unify(b,
h.head,k);null!==k&&(k.goal=c.goal.replace(h.body),null!==k.goal&&(k.goal=k.goal.apply(k.substitution)),k.substitution=c.substitution.apply(k.substitution),k.parent=c,f.push(k))}this.prepend(f)}}}else e.type.is_variable(c.goal)?this.throwError(e.error.instantiation(this.level)):this.throwError(e.error.type("callable",c.goal,this.level));return a}};A.prototype.answer=function(a){return this.thread.answer(a)};z.prototype.answer=function(a){a=a||function(a){};this.__calls.push(a);1<this.__calls.length||
this.again()};A.prototype.answers=function(a,c,b){return this.thread.answers(a,c,b)};z.prototype.answers=function(a,c,b){var g=this;0>=c?b&&b():this.answer(function(e){a(e);!1!==e?setTimeout(function(){g.answers(a,c-1,b)},1):b&&b()})};A.prototype.again=function(){return this.thread.again()};z.prototype.again=function(){for(var a,c=Date.now();0<this.__calls.length;){this.warnings=[];for(this.current_limit=this.session.limit;0<this.current_limit&&0<this.points.length&&null!==this.points[0].goal&&!e.type.is_error(this.points[0].goal);)if(this.current_limit--,
!0===this.step())return;this.cpu_time_last=Date.now()-c;this.cpu_time+=this.cpu_time_last;var b=this.__calls.shift();0>=this.current_limit?b(null):0===this.points.length?b(!1):(e.type.is_error(this.points[0].goal)?(a=this.session.format_error(this.points.shift()),this.points=[]):(this.debugger&&this.debugger_states.push(this.points[0]),a=this.session.format_success(this.points.shift())),b(a))}};A.prototype.unfold=function(a){if(null===a.body)return!1;var g=a.head,b=a.body,e=b.select(),d=new z(this),
f=[];d.add_goal(e);d.step();for(e=0;e<d.points.length;e++){var h=d.points[e],l=g.apply(h.substitution),k=b.replace(h.goal);null!==k&&(k=k.apply(h.substitution));f.push(new F(l,k))}g=this.rules[g.indicator];a=C(g,a);return 0<f.length&&-1!==a?(g.splice.apply(g,[a,1].concat(f)),!0):!1};z.prototype.unfold=function(a){return this.session.unfold(a)};x.prototype.interpret=function(a){return e.error.instantiation(a.level)};t.prototype.interpret=function(a){return this};l.prototype.interpret=function(a){return e.type.is_unitary_list(this)?
this.args[0].interpret(a):e.operate(a,this)};x.prototype.compare=function(a){return this.id<a.id?-1:this.id>a.id?1:0};t.prototype.compare=function(a){if(this.value===a.value&&this.is_float===a.is_float)return 0;if(this.value<a.value||this.value===a.value&&this.is_float&&!a.is_float)return-1;if(this.value>a.value)return 1};l.prototype.compare=function(a){if(this.args.length<a.args.length||this.args.length===a.args.length&&this.id<a.id)return-1;if(this.args.length>a.args.length||this.args.length===
a.args.length&&this.id>a.id)return 1;for(var g=0;g<this.args.length;g++){var b=e.compare(this.args[g],a.args[g]);if(0!==b)return b}return 0};B.prototype.lookup=function(a){return this.links[a]?this.links[a]:null};B.prototype.filter=function(a){var g={},b;for(b in this.links)if(this.links.hasOwnProperty(b)){var e=this.links[b];a(b,e)&&(g[b]=e)}return new B(g)};B.prototype.exclude=function(a){var g={},b;for(b in this.links)this.links.hasOwnProperty(b)&&-1===C(a,b)&&(g[b]=this.links[b]);return new B(g)};
B.prototype.add=function(a,c){var g=new B;g.links[a]=c;return g};B.prototype.domain=function(a){a=!0===a?function(a){return a}:function(a){return new x(a)};var g=[],b;for(b in this.links)g.push(a(b));return g};x.prototype.compile=function(){return'new pl.type.Var("'+this.id.toString()+'")'};t.prototype.compile=function(){return"new pl.type.Num("+this.value.toString()+", "+this.is_float.toString()+")"};l.prototype.compile=function(){return'new pl.type.Term("'+this.id.replace(/"/g,'\\"')+'", ['+J(this.args,
function(a){return a.compile()})+"])"};F.prototype.compile=function(){return"new pl.type.Rule("+this.head.compile()+", "+(null===this.body?"null":this.body.compile())+")"};A.prototype.compile=function(){var a=[],c;for(c in this.rules)if(this.rules.hasOwnProperty(c)){var b=this.rules[c];var e=[];var d='"'+c+'": [';for(var f=0;f<b.length;f++)e.push(b[f].compile());d+=e.join();d+="]";a.push(d)}return"{"+a.join()+"};"};x.prototype.toJavaScript=function(){};t.prototype.toJavaScript=function(){return this.value};
l.prototype.toJavaScript=function(){if(0===this.args.length&&"[]/0"!==this.indicator)return this.id;if(e.type.is_list(this)){for(var a=[],c=this,b;"./2"===c.indicator;){b=c.args[0].toJavaScript();if(void 0===b)return;a.push(b);c=c.args[1]}if("[]/0"===c.indicator)return a}};F.prototype.singleton_variables=function(){var a=this.head.variables(),c={},b=[];null!==this.body&&(a=a.concat(this.body.variables()));for(var e=0;e<a.length;e++)void 0===c[a[e]]&&(c[a[e]]=0),c[a[e]]++;for(var d in c)"_"!==d&&1===
c[d]&&b.push(d);return b};var e={__env:"undefined"!==typeof module&&module.exports?global:window,module:{},version:I,parser:{tokenizer:p,expression:m},utils:{str_indicator:G},statistics:{getCountTerms:function(){return P}},fromJavaScript:{test:{boolean:function(a){return!0===a||!1===a},number:function(a){return"number"===typeof a},string:function(a){return"string"===typeof a},list:function(a){return a instanceof Array},variable:function(a){return void 0===a},any:function(a){return!0}},conversion:{boolean:function(a){return new l(a?
"true":"false",[])},number:function(a){return new t(a,0!==a%1)},string:function(a){return new l(a,[])},list:function(a){for(var g=[],b,d=0;d<a.length;d++){b=e.fromJavaScript.apply(a[d]);if(void 0===b)return;g.push(b)}return D(g)},variable:function(a){return new x("_")},any:function(a){}},apply:function(a){for(var g in e.fromJavaScript.test)if("any"!==g&&e.fromJavaScript.test[g](a))return e.fromJavaScript.conversion[g](a);return e.fromJavaScript.conversion.any(a)}},type:{Var:x,Num:t,Term:l,Rule:F,
State:r,Module:Q,Thread:z,Session:A,Substitution:B,order:[x,t,l],compare:function(a,c){var g=C(e.type.order,a.constructor),d=C(e.type.order,c.constructor);if(g<d)return-1;if(g>d)return 1;if(!(a.constructor!==t||a.is_float&&c.is_float)){if(a.is_float)return-1;if(c.is_float)return 1}return 0},is_substitution:function(a){return a instanceof B},is_state:function(a){return a instanceof r},is_rule:function(a){return a instanceof F},is_variable:function(a){return a instanceof x},is_anonymous_var:function(a){return a instanceof
x&&"_"===a.id},is_callable:function(a){return a instanceof l},is_number:function(a){return a instanceof t},is_integer:function(a){return a instanceof t&&!a.is_float},is_float:function(a){return a instanceof t&&a.is_float},is_term:function(a){return a instanceof l},is_atom:function(a){return a instanceof l&&0===a.args.length},is_ground:function(a){if(a instanceof x)return!1;if(a instanceof l)for(var g=0;g<a.args.length;g++)if(!e.type.is_ground(a.args[g]))return!1;return!0},is_atomic:function(a){return a instanceof
l&&0===a.args.length||a instanceof t},is_compound:function(a){return a instanceof l&&0<a.args.length},is_list:function(a){return a instanceof l&&("[]/0"===a.indicator||"./2"===a.indicator)},is_empty_list:function(a){return a instanceof l&&"[]/0"===a.indicator},is_non_empty_list:function(a){return a instanceof l&&"./2"===a.indicator},is_fully_list:function(a){for(;a instanceof l&&"./2"===a.indicator;)a=a.args[1];return a instanceof x||a instanceof l&&"[]/0"===a.indicator},is_instantiated_list:function(a){for(;a instanceof
l&&"./2"===a.indicator;)a=a.args[1];return a instanceof l&&"[]/0"===a.indicator},is_unitary_list:function(a){return a instanceof l&&"./2"===a.indicator&&a.args[1]instanceof l&&"[]/0"===a.args[1].indicator},is_character:function(a){return a instanceof l&&1===a.id.length||0<a.id.length&&2>=a.id.length&&65536<=L(a.id,0)},is_character_code:function(a){return a instanceof t&&!a.is_float},is_operator:function(a){return a instanceof l&&e.arithmetic.evaluation[a.indicator]},is_directive:function(a){return a instanceof
l&&void 0!==e.directive[a.indicator]},is_builtin:function(a){return a instanceof l&&void 0!==e.predicate[a.indicator]},is_error:function(a){return a instanceof l&&"throw/1"===a.indicator},is_predicate_indicator:function(a){return a instanceof l&&"//2"===a.indicator&&a.args[0]instanceof l&&0===a.args[0].args.length&&a.args[1]instanceof t&&!1===a.args[1].is_float},is_flag:function(a){return a instanceof l&&0===a.args.length&&void 0!==e.flag[a.id]},is_value_flag:function(a,c){if(!e.type.is_flag(a))return!1;
for(var b in e.flag[a.id].allowed)if(e.flag[a.id].allowed.hasOwnProperty(b)&&e.flag[a.id].allowed[b].equals(c))return!0;return!1},is_modifiable_flag:function(a){return e.type.is_flag(a)&&e.flag[a.id].changeable},is_module:function(a){return a instanceof l&&"library/1"===a.indicator&&a.args[0]instanceof l&&0===a.args[0].args.length&&void 0!==e.module[a.args[0].id]}},arithmetic:{evaluation:{"e/0":{type_args:null,type_result:!0,fn:function(a){return Math.E}},"pi/0":{type_args:null,type_result:!0,fn:function(a){return Math.PI}},
"tau/0":{type_args:null,type_result:!0,fn:function(a){return 2*Math.PI}},"epsilon/0":{type_args:null,type_result:!0,fn:function(a){return Number.EPSILON}},"+/1":{type_args:null,type_result:null,fn:function(a,c){return a}},"-/1":{type_args:null,type_result:null,fn:function(a,c){return-a}},"\\/1":{type_args:!1,type_result:!1,fn:function(a,c){return~a}},"abs/1":{type_args:null,type_result:null,fn:function(a,c){return Math.abs(a)}},"sign/1":{type_args:null,type_result:null,fn:function(a,c){return Math.sign(a)}},
"float_integer_part/1":{type_args:!0,type_result:!1,fn:function(a,c){return parseInt(a)}},"float_fractional_part/1":{type_args:!0,type_result:!0,fn:function(a,c){return a-parseInt(a)}},"float/1":{type_args:null,type_result:!0,fn:function(a,c){return parseFloat(a)}},"floor/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.floor(a)}},"truncate/1":{type_args:!0,type_result:!1,fn:function(a,c){return parseInt(a)}},"round/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.round(a)}},
"ceiling/1":{type_args:!0,type_result:!1,fn:function(a,c){return Math.ceil(a)}},"sin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.sin(a)}},"cos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.cos(a)}},"tan/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.tan(a)}},"asin/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.asin(a)}},"acos/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.acos(a)}},"atan/1":{type_args:null,type_result:!0,
fn:function(a,c){return Math.atan(a)}},"atan2/2":{type_args:null,type_result:!0,fn:function(a,c,b){return Math.atan2(a,c)}},"exp/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.exp(a)}},"sqrt/1":{type_args:null,type_result:!0,fn:function(a,c){return Math.sqrt(a)}},"log/1":{type_args:null,type_result:!0,fn:function(a,c){return 0<a?Math.log(a):e.error.evaluation("undefined",c.__call_indicator)}},"+/2":{type_args:null,type_result:null,fn:function(a,c,b){return a+c}},"-/2":{type_args:null,
type_result:null,fn:function(a,c,b){return a-c}},"*/2":{type_args:null,type_result:null,fn:function(a,c,b){return a*c}},"//2":{type_args:null,type_result:!0,fn:function(a,c,b){return c?a/c:e.error.evaluation("zero_division",b.__call_indicator)}},"///2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?parseInt(a/c):e.error.evaluation("zero_division",b.__call_indicator)}},"**/2":{type_args:null,type_result:!0,fn:function(a,c,b){return Math.pow(a,c)}},"^/2":{type_args:null,type_result:null,fn:function(a,
c,b){return Math.pow(a,c)}},"<</2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a<<c}},">>/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a>>c}},"/\\/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a&c}},"\\//2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a|c}},"xor/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return a^c}},"rem/2":{type_args:!1,type_result:!1,fn:function(a,c,b){return c?a%c:e.error.evaluation("zero_division",b.__call_indicator)}},"mod/2":{type_args:!1,
type_result:!1,fn:function(a,c,b){return c?a-parseInt(a/c)*c:e.error.evaluation("zero_division",b.__call_indicator)}},"max/2":{type_args:null,type_result:null,fn:function(a,c,b){return Math.max(a,c)}},"min/2":{type_args:null,type_result:null,fn:function(a,c,b){return Math.min(a,c)}}}},directive:{"dynamic/1":function(a,c){var b=c.args[0];e.type.is_variable(b)?a.throwError(e.error.instantiation(c.indicator)):e.type.is_compound(b)&&"//2"===b.indicator?e.type.is_variable(b.args[0])||e.type.is_variable(b.args[1])?
a.throwError(e.error.instantiation(c.indicator)):e.type.is_atom(b.args[0])?e.type.is_integer(b.args[1])?(c=c.args[0].args[0].id+"/"+c.args[0].args[1].value,a.session.public_predicates[c]=!0,a.session.rules[c]||(a.session.rules[c]=[])):a.throwError(e.error.type("integer",b.args[1],c.indicator)):a.throwError(e.error.type("atom",b.args[0],c.indicator)):a.throwError(e.error.type("predicate_indicator",b,c.indicator))},"multifile/1":function(a,c){var b=c.args[0];e.type.is_variable(b)?a.throwError(e.error.instantiation(c.indicator)):
e.type.is_compound(b)&&"//2"===b.indicator?e.type.is_variable(b.args[0])||e.type.is_variable(b.args[1])?a.throwError(e.error.instantiation(c.indicator)):e.type.is_atom(b.args[0])?e.type.is_integer(b.args[1])?a.session.multifile_predicates[c.args[0].args[0].id+"/"+c.args[0].args[1].value]=!0:a.throwError(e.error.type("integer",b.args[1],c.indicator)):a.throwError(e.error.type("atom",b.args[0],c.indicator)):a.throwError(e.error.type("predicate_indicator",b,c.indicator))},"set_prolog_flag/2":function(a,
c){var b=c.args[0],g=c.args[1];e.type.is_variable(b)||e.type.is_variable(g)?a.throwError(e.error.instantiation(c.indicator)):e.type.is_atom(b)?e.type.is_flag(b)?e.type.is_value_flag(b,g)?e.type.is_modifiable_flag(b)?a.session.flag[b.id]=g:a.throwError(e.error.permission("modify","flag",b)):a.throwError(e.error.domain("flag_value",new l("+",[b,g]),c.indicator)):a.throwError(e.error.domain("prolog_flag",b,c.indicator)):a.throwError(e.error.type("atom",b,c.indicator))},"use_module/1":function(a,c){var b=
c.args[0];e.type.is_variable(b)?a.throwError(e.error.instantiation(c.indicator)):e.type.is_term(b)?e.type.is_module(b)&&(c=b.args[0].id,-1===C(a.session.modules,c)&&a.session.modules.push(c)):a.throwError(e.error.type("term",b,c.indicator))},"char_conversion/2":function(a,c){var b=c.args[0],g=c.args[1];e.type.is_variable(b)||e.type.is_variable(g)?a.throwError(e.error.instantiation(c.indicator)):e.type.is_character(b)?e.type.is_character(g)?b.id===g.id?delete a.session.__char_conversion[b.id]:a.session.__char_conversion[b.id]=
g.id:a.throwError(e.error.type("character",g,c.indicator)):a.throwError(e.error.type("character",b,c.indicator))},"op/3":function(a,c){var b=c.args[0],g=c.args[1],d=c.args[2];if(e.type.is_variable(b)||e.type.is_variable(g)||e.type.is_variable(d))a.throwError(e.error.instantiation(c.indicator));else if(e.type.is_integer(b))if(e.type.is_atom(g))if(e.type.is_atom(d))if(0>b.value||1200<b.value)a.throwError(e.error.domain("operator_priority",b,c.indicator));else if(","===d.id)a.throwError(e.error.permission("modify",
"operator",d,c.indicator));else if("|"===d.id&&(1001>b.value||3!==g.id.length))a.throwError(e.error.permission("modify","operator",d,c.indicator));else if(-1==="fy fx yf xf xfx yfx xfy".split(" ").indexOf(g.id))a.throwError(e.error.domain("operator_specifier",g,c.indicator));else{var f={prefix:null,infix:null,postfix:null};for(l in a.session.__operators)if(a.session.__operators.hasOwnProperty(l)){var h=a.session.__operators[l][d.id];h&&(-1!==C(h,"fx")&&(f.prefix={priority:l,type:"fx"}),-1!==C(h,"fy")&&
(f.prefix={priority:l,type:"fy"}),-1!==C(h,"xf")&&(f.postfix={priority:l,type:"xf"}),-1!==C(h,"yf")&&(f.postfix={priority:l,type:"yf"}),-1!==C(h,"xfx")&&(f.infix={priority:l,type:"xfx"}),-1!==C(h,"xfy")&&(f.infix={priority:l,type:"xfy"}),-1!==C(h,"yfx")&&(f.infix={priority:l,type:"yfx"}))}switch(g.id){case "fy":case "fx":var l="prefix";break;case "yf":case "xf":l="postfix";break;default:l="infix"}if(((f.prefix&&"prefix"===l||f.postfix&&"postfix"===l||f.infix&&"infix"===l)&&f[l].type!==g.id||f.infix&&
"postfix"===l||f.postfix&&"infix"===l)&&0!==b.value)a.throwError(e.error.permission("create","operator",d,c.indicator));else{if(f[l]){c=a.session.__operators[f[l].priority][d.id];h=g.id;for(var k=c.length-1;0<=k;k--)c[k]===h&&c.splice(k,1);0===a.session.__operators[f[l].priority][d.id].length&&delete a.session.__operators[f[l].priority][d.id]}0<b.value&&(a.session.__operators[b.value]||(a.session.__operators[b.value.toString()]={}),a.session.__operators[b.value][d.id]||(a.session.__operators[b.value][d.id]=
[]),a.session.__operators[b.value][d.id].push(g.id));return!0}}else a.throwError(e.error.type("atom",d,c.indicator));else a.throwError(e.error.type("atom",g,c.indicator));else a.throwError(e.error.type("integer",b,c.indicator))}},predicate:{"op/3":function(a,c,b){e.directive["op/3"](a,b)&&a.success(c)},"current_op/3":function(a,c,b){var g=b.args[0],e=b.args[1];b=b.args[2];var d=[],f;for(f in a.session.__operators)for(var h in a.session.__operators[f])for(var k=0;k<a.session.__operators[f][h].length;k++)d.push(new r(c.goal.replace(new l(",",
[new l("=",[new t(f,!1),g]),new l(",",[new l("=",[new l(a.session.__operators[f][h][k],[]),e]),new l("=",[new l(h,[]),b])])])),c.substitution,c));a.prepend(d)},";/2":function(a,c,b){if(e.type.is_term(b.args[0])&&"->/2"===b.args[0].indicator){var g=a.points,d=a.session.format_success,f=a.session.format_error;a.session.format_success=function(a){return a.substitution};a.session.format_error=function(a){return a.goal};a.points=[new r(b.args[0].args[0],c.substitution,c)];a.__calls.unshift(function(h){a.points=
g;a.session.format_success=d;a.session.format_error=f;!1===h?a.points=[new r(c.goal.replace(b.args[1]),c.substitution,c)].concat(g):e.type.is_error(h)?a.throwError(h.args[0]):null===h?(a.points=[c].concat(g),a.__calls.shift()(null)):a.points=[new r(c.goal.replace(b.args[0].args[1]).apply(h),c.substitution.apply(h),c)].concat(g)})}else{var h=new r(c.goal.replace(b.args[0]),c.substitution,c),l=new r(c.goal.replace(b.args[1]),c.substitution,c);a.prepend([h,l])}},"!/0":function(a,c,b){var g,e=[];for(g=
c;null!==g.parent&&g.parent.goal.search(b);)g=g.parent;for(b=0;b<a.points.length;b++){for(var d=a.points[b],f=d.parent;null!==f&&f!==g.parent;)f=f.parent;null===f&&f!==g.parent&&e.push(d)}a.points=[new r(c.goal.replace(null),c.substitution,c)].concat(e)},"\\+/1":function(a,c,b){b=b.args[0];e.type.is_variable(b)?a.throwError(e.error.instantiation(a.level)):e.type.is_callable(b)?a.prepend([new r(c.goal.replace(new l(",",[new l(",",[new l("call",[b]),new l("!",[])]),new l("fail",[])])),c.substitution,
c),new r(c.goal.replace(null),c.substitution,c)]):a.throwError(e.error.type("callable",b,a.level))},"->/2":function(a,c,b){b=c.goal.replace(new l(",",[b.args[0],new l(",",[new l("!"),b.args[1]])]));a.prepend([new r(b,c.substitution,c)])},"fail/0":function(a,c,b){},"false/0":function(a,c,b){},"true/0":function(a,c,b){a.success(c)},"call/1":H(1),"call/2":H(2),"call/3":H(3),"call/4":H(4),"call/5":H(5),"call/6":H(6),"call/7":H(7),"call/8":H(8),"once/1":function(a,c,b){a.prepend([new r(c.goal.replace(new l(",",
[new l("call",[b.args[0]]),new l("!",[])])),c.substitution,c)])},"forall/2":function(a,c,b){var g=b.args[1];a.prepend([new r(c.goal.replace(new l("\\+",[new l(",",[new l("call",[b.args[0]]),new l("\\+",[new l("call",[g])])])])),c.substitution,c)])},"repeat/0":function(a,c,b){a.prepend([new r(c.goal.replace(null),c.substitution,c),c])},"throw/1":function(a,c,b){e.type.is_variable(b.args[0])?a.throwError(e.error.instantiation(a.level)):a.throwError(b.args[0])},"catch/3":function(a,c,b){var g=a.points;
a.points=[];a.prepend([new r(b.args[0],c.substitution,c)]);var d=a.session.format_success,f=a.session.format_error;a.session.format_success=function(a){return a.substitution};a.session.format_error=function(a){return a.goal};a.__calls.unshift(function(h){var v=a.points;a.points=g;a.session.format_success=d;a.session.format_error=f;if(e.type.is_error(h)){var k=[];for(v=0;v<a.points.length;v++){for(var n=a.points[v],m=n.parent;null!==m&&m!==c.parent;)m=m.parent;null===m&&m!==c.parent&&k.push(n)}a.points=
k;k="true/0"===a.getFlag("occurs_check").indicator;n=e.unify(h.args[0],b.args[1],k);null!==n?(n.substitution=c.substitution.apply(n.substitution),n.goal=c.goal.replace(b.args[2]).apply(n.substitution),n.parent=c,a.prepend([n])):a.throwError(h.args[0])}else!1!==h&&(k=null===h?[]:[new r(c.goal.apply(h).replace(null),c.substitution.apply(h),c)],v=J(v,function(a){null===a.goal&&(a.goal=new l("true",[]));a=new r(c.goal.replace(new l("catch",[a.goal,b.args[1],b.args[2]])),c.substitution.apply(a.substitution),
a.parent);a.exclude=b.args[0].variables();return a}),a.prepend(k.concat(v)),null===h&&(this.current_limit=0,a.__calls.shift()(null)))})},"=/2":function(a,c,b){var g="true/0"===a.getFlag("occurs_check").indicator;b=e.unify(b.args[0],b.args[1],g);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),b.substitution=c.substitution.apply(b.substitution),b.parent=c,a.prepend([b]))},"unify_with_occurs_check/2":function(a,c,b){b=e.unify(b.args[0],b.args[1],!0);null!==b&&(b.goal=c.goal.apply(b.substitution).replace(null),
b.substitution=c.substitution.apply(b.substitution),b.parent=c,a.prepend([b]))},"\\=/2":function(a,c,b){var g="true/0"===a.getFlag("occurs_check").indicator;null===e.unify(b.args[0],b.args[1],g)&&a.success(c)},"subsumes_term/2":function(a,c,b){var g="true/0"===a.getFlag("occurs_check").indicator;g=e.unify(b.args[1],b.args[0],g);null!==g&&b.args[1].apply(g.substitution).equals(b.args[1])&&a.success(c)},"findall/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));
else if(e.type.is_callable(d))if(e.type.is_variable(f)||e.type.is_list(f)){var h=a.next_free_variable();b=new l(",",[d,new l("=",[h,g])]);var k=a.points,n=a.session.limit,m=a.session.format_success;a.session.format_success=function(a){return a.substitution};a.add_goal(b,!0,c);var p=[],q=function(b){if(!1===b||null===b||e.type.is_error(b))if(a.points=k,a.session.limit=n,a.session.format_success=m,e.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){b=new l("[]");for(var g=p.length-
1;0<=g;g--)b=new l(".",[p[g],b]);a.prepend([new r(c.goal.replace(new l("=",[f,b])),c.substitution,c)])}}else a.__calls.unshift(q),p.push(b.links[h.id]),a.session.limit=a.current_limit};a.__calls.unshift(q)}else a.throwError(e.error.type("list",f,b.indicator));else a.throwError(e.error.type("callable",d,b.indicator))},"bagof/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_callable(d))if(e.type.is_variable(f)||
e.type.is_list(f)){var h=a.next_free_variable();if("^/2"===d.indicator){var k=d.args[0].variables();d=d.args[1]}else k=[];k=k.concat(g.variables());b=d.variables().filter(function(a){return-1===C(k,a)});for(var n=new l("[]"),m=b.length-1;0<=m;m--)n=new l(".",[new x(b[m]),n]);g=new l(",",[d,new l("=",[h,new l(",",[n,g])])]);var p=a.points,q=a.session.limit,y=a.session.format_success;a.session.format_success=function(a){return a.substitution};a.add_goal(g,!0,c);var t=[],D=function(b){if(!1===b||null===
b||e.type.is_error(b))if(a.points=p,a.session.limit=q,a.session.format_success=y,e.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var g=[],d=0;d<t.length;d++){b=t[d].answers;for(var k=new l("[]"),v=b.length-1;0<=v;v--)k=new l(".",[b[v],k]);g.push(new r(c.goal.replace(new l(",",[new l("=",[n,t[d].variables]),new l("=",[f,k])])),c.substitution,c))}a.prepend(g)}}else{a.__calls.unshift(D);g=!1;d=b.links[h.id].args[0];b=b.links[h.id].args[1];for(k in t)if(t.hasOwnProperty(k)&&
(v=t[k],v.variables.equals(d))){v.answers.push(b);g=!0;break}g||t.push({variables:d,answers:[b]});a.session.limit=a.current_limit}};a.__calls.unshift(D)}else a.throwError(e.error.type("list",f,b.indicator));else a.throwError(e.error.type("callable",d,b.indicator))},"setof/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_callable(d))if(e.type.is_variable(f)||e.type.is_list(f)){var h=a.next_free_variable();
if("^/2"===d.indicator){var k=d.args[0].variables();d=d.args[1]}else k=[];k=k.concat(g.variables());b=d.variables().filter(function(a){return-1===C(k,a)});for(var n=new l("[]"),m=b.length-1;0<=m;m--)n=new l(".",[new x(b[m]),n]);g=new l(",",[d,new l("=",[h,new l(",",[n,g])])]);var p=a.points,q=a.session.limit,y=a.session.format_success;a.session.format_success=function(a){return a.substitution};a.add_goal(g,!0,c);var t=[],D=function(b){if(!1===b||null===b||e.type.is_error(b))if(a.points=p,a.session.limit=
q,a.session.format_success=y,e.type.is_error(b))a.throwError(b.args[0]);else{if(0<a.current_limit){for(var g=[],d=0;d<t.length;d++){b=t[d].answers.sort(e.compare);for(var k=new l("[]"),v=b.length-1;0<=v;v--)k=new l(".",[b[v],k]);g.push(new r(c.goal.replace(new l(",",[new l("=",[n,t[d].variables]),new l("=",[f,k])])),c.substitution,c))}a.prepend(g)}}else{a.__calls.unshift(D);g=!1;d=b.links[h.id].args[0];b=b.links[h.id].args[1];for(k in t)if(t.hasOwnProperty(k)&&(v=t[k],v.variables.equals(d))){v.answers.push(b);
g=!0;break}g||t.push({variables:d,answers:[b]});a.session.limit=a.current_limit}};a.__calls.unshift(D)}else a.throwError(e.error.type("list",f,b.indicator));else a.throwError(e.error.type("callable",d,b.indicator))},"functor/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(g)&&(e.type.is_variable(d)||e.type.is_variable(f)))a.throwError(e.error.instantiation("functor/3"));else if(e.type.is_variable(f)||e.type.is_integer(f))if(e.type.is_variable(d)||e.type.is_atomic(d))if(e.type.is_integer(d)&&
e.type.is_integer(f)&&0!==f.value)a.throwError(e.error.type("atom",b.args[1],"functor/3"));else if(e.type.is_variable(g)){if(0<=b.args[2].value){b=[];for(var h=0;h<f.value;h++)b.push(a.next_free_variable());d=e.type.is_integer(d)?d:new l(d.id,b);a.prepend([new r(c.goal.replace(new l("=",[g,d])),c.substitution,c.parent)])}}else b=e.type.is_integer(g)?g:new l(g.id,[]),g=e.type.is_integer(g)?new t(0,!1):new t(g.args.length,!1),g=new l(",",[new l("=",[b,d]),new l("=",[g,f])]),a.prepend([new r(c.goal.replace(g),
c.substitution,c.parent)]);else a.throwError(e.error.type("atomic",b.args[1],"functor/3"));else a.throwError(e.error.type("integer",b.args[2],"functor/3"))},"arg/3":function(a,c,b){if(e.type.is_variable(b.args[0])||e.type.is_variable(b.args[1]))a.throwError(e.error.instantiation(b.indicator));else if(0>b.args[0].value)a.throwError(e.error.domain("not_less_than_zero",b.args[0],b.indicator));else if(e.type.is_compound(b.args[1])){var g=b.args[0].value;0<g&&g<=b.args[1].args.length&&(b=new l("=",[b.args[1].args[g-
1],b.args[2]]),a.prepend([new r(c.goal.replace(b),c.substitution,c)]))}else a.throwError(e.error.type("compound",b.args[1],b.indicator))},"=../2":function(a,c,b){if(e.type.is_variable(b.args[0])&&(e.type.is_variable(b.args[1])||e.type.is_non_empty_list(b.args[1])&&e.type.is_variable(b.args[1].args[0])))a.throwError(e.error.instantiation(b.indicator));else if(!e.type.is_fully_list(b.args[1]))a.throwError(e.error.type("list",b.args[1],b.indicator));else if(!e.type.is_variable(b.args[0])){if(e.type.is_atomic(b.args[0]))var g=
new l(".",[b.args[0],new l("[]")]);else{g=new l("[]");for(var d=b.args[0].args.length-1;0<=d;d--)g=new l(".",[b.args[0].args[d],g]);g=new l(".",[new l(b.args[0].id),g])}a.prepend([new r(c.goal.replace(new l("=",[g,b.args[1]])),c.substitution,c)])}else if(!e.type.is_variable(b.args[1])){d=[];for(g=b.args[1].args[1];"./2"===g.indicator;)d.push(g.args[0]),g=g.args[1];e.type.is_variable(b.args[0])&&e.type.is_variable(g)?a.throwError(e.error.instantiation(b.indicator)):0===d.length&&e.type.is_compound(b.args[1].args[0])?
a.throwError(e.error.type("atomic",b.args[1].args[0],b.indicator)):0<d.length&&(e.type.is_compound(b.args[1].args[0])||e.type.is_number(b.args[1].args[0]))?a.throwError(e.error.type("atom",b.args[1].args[0],b.indicator)):0===d.length?a.prepend([new r(c.goal.replace(new l("=",[b.args[1].args[0],b.args[0]],c)),c.substitution,c)]):a.prepend([new r(c.goal.replace(new l("=",[new l(b.args[1].args[0].id,d),b.args[0]])),c.substitution,c)])}},"copy_term/2":function(a,c,b){var g=b.args[0].rename(a);a.prepend([new r(c.goal.replace(new l("=",
[g,b.args[1]])),c.substitution,c.parent)])},"term_variables/2":function(a,c,b){var g=b.args[0],d=b.args[1];e.type.is_fully_list(d)?(b=D(J(E(g.variables()),function(a){return new x(a)})),a.prepend([new r(c.goal.replace(new l("=",[d,b])),c.substitution,c)])):a.throwError(e.error.type("list",d,b.indicator))},"clause/2":function(a,c,b){if(e.type.is_variable(b.args[0]))a.throwError(e.error.instantiation(b.indicator));else if(!e.type.is_callable(b.args[0]))a.throwError(e.error.type("callable",b.args[0],
b.indicator));else if(!e.type.is_variable(b.args[1])&&!e.type.is_callable(b.args[1]))a.throwError(e.error.type("callable",b.args[1],b.indicator));else if(void 0!==a.session.rules[b.args[0].indicator])if(a.is_public_predicate(b.args[0].indicator)){var g=[],d;for(d in a.session.rules[b.args[0].indicator])if(a.session.rules[b.args[0].indicator].hasOwnProperty(d)){var f=a.session.rules[b.args[0].indicator][d];a.session.renamed_variables={};f=f.rename(a);null===f.body&&(f.body=new l("true"));f=new l(",",
[new l("=",[f.head,b.args[0]]),new l("=",[f.body,b.args[1]])]);g.push(new r(c.goal.replace(f),c.substitution,c))}a.prepend(g)}else a.throwError(e.error.permission("access","private_procedure",b.args[0].indicator,b.indicator))},"current_predicate/1":function(a,c,b){var g=b.args[0];if(e.type.is_variable(g)||e.type.is_compound(g)&&"//2"===g.indicator)if(e.type.is_variable(g)||e.type.is_variable(g.args[0])||e.type.is_atom(g.args[0]))if(e.type.is_variable(g)||e.type.is_variable(g.args[1])||e.type.is_integer(g.args[1])){b=
[];for(var d in a.session.rules)if(a.session.rules.hasOwnProperty(d)){var f=d.lastIndexOf("/"),h=d.substr(0,f);f=parseInt(d.substr(f+1,d.length-(f+1)));h=new l("/",[new l(h),new t(f,!1)]);h=new l("=",[h,g]);b.push(new r(c.goal.replace(h),c.substitution,c))}a.prepend(b)}else a.throwError(e.error.type("integer",g.args[1],b.indicator));else a.throwError(e.error.type("atom",g.args[0],b.indicator));else a.throwError(e.error.type("predicate_indicator",g,b.indicator))},"asserta/1":function(a,c,b){if(e.type.is_variable(b.args[0]))a.throwError(e.error.instantiation(b.indicator));
else if(e.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var g=b.args[0].args[0];var d=y(b.args[0].args[1])}else g=b.args[0],d=null;e.type.is_callable(g)?null===d||e.type.is_callable(d)?a.is_public_predicate(g.indicator)?(void 0===a.session.rules[g.indicator]&&(a.session.rules[g.indicator]=[]),a.session.public_predicates[g.indicator]=!0,a.session.rules[g.indicator]=[new F(g,d,!0)].concat(a.session.rules[g.indicator]),a.success(c)):a.throwError(e.error.permission("modify","static_procedure",
g.indicator,b.indicator)):a.throwError(e.error.type("callable",d,b.indicator)):a.throwError(e.error.type("callable",g,b.indicator))}else a.throwError(e.error.type("callable",b.args[0],b.indicator))},"assertz/1":function(a,c,b){if(e.type.is_variable(b.args[0]))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var g=b.args[0].args[0];var d=y(b.args[0].args[1])}else g=b.args[0],d=null;e.type.is_callable(g)?null===d||e.type.is_callable(d)?
a.is_public_predicate(g.indicator)?(void 0===a.session.rules[g.indicator]&&(a.session.rules[g.indicator]=[]),a.session.public_predicates[g.indicator]=!0,a.session.rules[g.indicator].push(new F(g,d,!0)),a.success(c)):a.throwError(e.error.permission("modify","static_procedure",g.indicator,b.indicator)):a.throwError(e.error.type("callable",d,b.indicator)):a.throwError(e.error.type("callable",g,b.indicator))}else a.throwError(e.error.type("callable",b.args[0],b.indicator))},"retract/1":function(a,c,b){if(e.type.is_variable(b.args[0]))a.throwError(e.error.instantiation(b.indicator));
else if(e.type.is_callable(b.args[0])){if(":-/2"===b.args[0].indicator){var g=b.args[0].args[0];var d=b.args[0].args[1]}else g=b.args[0],d=new l("true");if("undefined"===typeof c.retract)if(a.is_public_predicate(g.indicator)){if(void 0!==a.session.rules[g.indicator]){b=[];for(var f=0;f<a.session.rules[g.indicator].length;f++){a.session.renamed_variables={};var h=a.session.rules[g.indicator][f],k=h.rename(a);null===k.body&&(k.body=new l("true",[]));var n="true/0"===a.getFlag("occurs_check").indicator;
null!==e.unify(new l(",",[g,d]),new l(",",[k.head,k.body]),n)&&(k=new r(c.goal.replace(new l(",",[new l("retract",[new l(":-",[g,d])]),new l(",",[new l("=",[g,k.head]),new l("=",[d,k.body])])])),c.substitution,c),k.retract=h,b.push(k))}a.prepend(b)}}else a.throwError(e.error.permission("modify","static_procedure",g.indicator,b.indicator));else if(g=g.indicator,d=c.retract,null!==a.session.rules[g])for(b=0;b<a.session.rules[g].length;b++)if(a.session.rules[g][b]===d){a.session.rules[g].splice(b,1);
a.success(c);break}}else a.throwError(e.error.type("callable",b.args[0],b.indicator))},"retractall/1":function(a,c,b){var g=b.args[0];e.type.is_variable(g)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_callable(g)?a.prepend([new r(c.goal.replace(new l(",",[new l("retract",[new e.type.Term(":-",[g,new x("_")])]),new l("fail",[])])),c.substitution,c),new r(c.goal.replace(null),c.substitution,c)]):a.throwError(e.error.type("callable",g,b.indicator))},"abolish/1":function(a,c,b){if(e.type.is_variable(b.args[0])||
e.type.is_term(b.args[0])&&"//2"===b.args[0].indicator&&(e.type.is_variable(b.args[0].args[0])||e.type.is_variable(b.args[0].args[1])))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_term(b.args[0])&&"//2"===b.args[0].indicator)if(e.type.is_atom(b.args[0].args[0]))if(e.type.is_integer(b.args[0].args[1]))if(0>b.args[0].args[1].value)a.throwError(e.error.domain("not_less_than_zero",b.args[0].args[1],b.indicator));else if(e.type.is_number(a.getFlag("max_arity"))&&b.args[0].args[1].value>
a.getFlag("max_arity").value)a.throwError(e.error.representation("max_arity",b.indicator));else{var g=b.args[0].args[0].id+"/"+b.args[0].args[1].value;a.is_public_predicate(g)?(delete a.session.rules[g],a.success(c)):a.throwError(e.error.permission("modify","static_procedure",g,b.indicator))}else a.throwError(e.error.type("integer",b.args[0].args[1],b.indicator));else a.throwError(e.error.type("atom",b.args[0].args[0],b.indicator));else a.throwError(e.error.type("predicate_indicator",b.args[0],b.indicator))},
"atom_length/2":function(a,c,b){if(e.type.is_variable(b.args[0]))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_atom(b.args[0]))if(e.type.is_variable(b.args[1])||e.type.is_integer(b.args[1]))if(e.type.is_integer(b.args[1])&&0>b.args[1].value)a.throwError(e.error.domain("not_less_than_zero",b.args[1],b.indicator));else{var g=new t(b.args[0].id.length,!1);a.prepend([new r(c.goal.replace(new l("=",[g,b.args[1]])),c.substitution,c)])}else a.throwError(e.error.type("integer",b.args[1],
b.indicator));else a.throwError(e.error.type("atom",b.args[0],b.indicator))},"atom_concat/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(f)&&(e.type.is_variable(g)||e.type.is_variable(d)))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(g)||e.type.is_atom(g))if(e.type.is_variable(d)||e.type.is_atom(d))if(e.type.is_variable(f)||e.type.is_atom(f)){b=e.type.is_variable(g);var h=e.type.is_variable(d);if(b||h)if(b&&!h){if(b=f.id.substr(0,f.id.length-
d.id.length),b+d.id===f.id){var k=new l("=",[g,new l(b)]);a.prepend([new r(c.goal.replace(k),c.substitution,c)])}}else if(h&&!b)b=f.id.substr(g.id.length),g.id+b===f.id&&(k=new l("=",[d,new l(b)]),a.prepend([new r(c.goal.replace(k),c.substitution,c)]));else{b=[];for(h=0;h<=f.id.length;h++){k=new l(f.id.substr(0,h));var n=new l(f.id.substr(h));k=new l(",",[new l("=",[k,g]),new l("=",[n,d])]);b.push(new r(c.goal.replace(k),c.substitution,c))}a.prepend(b)}else k=new l("=",[f,new l(g.id+d.id)]),a.prepend([new r(c.goal.replace(k),
c.substitution,c)])}else a.throwError(e.error.type("atom",f,b.indicator));else a.throwError(e.error.type("atom",d,b.indicator));else a.throwError(e.error.type("atom",g,b.indicator))},"sub_atom/5":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2],h=b.args[3],k=b.args[4];if(e.type.is_variable(g))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(d)||e.type.is_integer(d))if(e.type.is_variable(f)||e.type.is_integer(f))if(e.type.is_variable(h)||e.type.is_integer(h))if(e.type.is_integer(d)&&
0>d.value)a.throwError(e.error.domain("not_less_than_zero",d,b.indicator));else if(e.type.is_integer(f)&&0>f.value)a.throwError(e.error.domain("not_less_than_zero",f,b.indicator));else if(e.type.is_integer(h)&&0>h.value)a.throwError(e.error.domain("not_less_than_zero",h,b.indicator));else{var n=[],m=[],p=[];if(e.type.is_variable(d))for(b=0;b<=g.id.length;b++)n.push(b);else n.push(d.value);if(e.type.is_variable(f))for(b=0;b<=g.id.length;b++)m.push(b);else m.push(f.value);if(e.type.is_variable(h))for(b=
0;b<=g.id.length;b++)p.push(b);else p.push(h.value);var q=[],y;for(y in n)if(n.hasOwnProperty(y)){b=n[y];for(var D in m)if(m.hasOwnProperty(D)){var E=m[D],u=g.id.length-b-E;if(-1!==C(p,u)&&b+E+u===g.id.length){var x=g.id.substr(b,E);if(g.id===g.id.substr(0,b)+x+g.id.substr(b+E,u)){x=new l("=",[new l(x),k]);var z=new l("=",[d,new t(b)]);E=new l("=",[f,new t(E)]);u=new l("=",[h,new t(u)]);u=new l(",",[new l(",",[new l(",",[z,E]),u]),x]);q.push(new r(c.goal.replace(u),c.substitution,c))}}}}a.prepend(q)}else a.throwError(e.error.type("integer",
h,b.indicator));else a.throwError(e.error.type("integer",f,b.indicator));else a.throwError(e.error.type("integer",d,b.indicator))},"atom_chars/2":function(a,c,b){var g=b.args[0],d=b.args[1];if(e.type.is_variable(g)&&e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(g)||e.type.is_atom(g))if(e.type.is_variable(g)){for(var f=d,h=e.type.is_variable(g),k="";"./2"===f.indicator;){if(e.type.is_character(f.args[0]))k+=f.args[0].id;else{if(e.type.is_variable(f.args[0])&&
h){a.throwError(e.error.instantiation(b.indicator));return}if(!e.type.is_variable(f.args[0])){a.throwError(e.error.type("character",f.args[0],b.indicator));return}}f=f.args[1]}e.type.is_variable(f)&&h?a.throwError(e.error.instantiation(b.indicator)):e.type.is_empty_list(f)||e.type.is_variable(f)?a.prepend([new r(c.goal.replace(new l("=",[new l(k),g])),c.substitution,c)]):a.throwError(e.error.type("list",d,b.indicator))}else{b=new l("[]");for(f=g.id.length-1;0<=f;f--)b=new l(".",[new l(g.id.charAt(f)),
b]);a.prepend([new r(c.goal.replace(new l("=",[d,b])),c.substitution,c)])}else a.throwError(e.error.type("atom",g,b.indicator))},"atom_codes/2":function(a,c,b){var g=b.args[0],d=b.args[1];if(e.type.is_variable(g)&&e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(g)||e.type.is_atom(g))if(e.type.is_variable(g)){for(var f=d,h=e.type.is_variable(g),k="";"./2"===f.indicator;){if(e.type.is_character_code(f.args[0]))k+=M(f.args[0].value);else{if(e.type.is_variable(f.args[0])&&
h){a.throwError(e.error.instantiation(b.indicator));return}if(!e.type.is_variable(f.args[0])){a.throwError(e.error.representation("character_code",b.indicator));return}}f=f.args[1]}e.type.is_variable(f)&&h?a.throwError(e.error.instantiation(b.indicator)):e.type.is_empty_list(f)||e.type.is_variable(f)?a.prepend([new r(c.goal.replace(new l("=",[new l(k),g])),c.substitution,c)]):a.throwError(e.error.type("list",d,b.indicator))}else{b=new l("[]");for(f=g.id.length-1;0<=f;f--)b=new l(".",[new t(L(g.id,
f),!1),b]);a.prepend([new r(c.goal.replace(new l("=",[d,b])),c.substitution,c)])}else a.throwError(e.error.type("atom",g,b.indicator))},"char_code/2":function(a,c,b){var g=b.args[0],d=b.args[1];e.type.is_variable(g)&&e.type.is_variable(d)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_variable(g)||e.type.is_character(g)?e.type.is_variable(d)||e.type.is_integer(d)?e.type.is_variable(d)||e.type.is_character_code(d)?e.type.is_variable(d)?(g=new t(L(g.id,0),!1),a.prepend([new r(c.goal.replace(new l("=",
[g,d])),c.substitution,c)])):(d=new l(M(d.value)),a.prepend([new r(c.goal.replace(new l("=",[d,g])),c.substitution,c)])):a.throwError(e.error.representation("character_code",b.indicator)):a.throwError(e.error.type("integer",d,b.indicator)):a.throwError(e.error.type("character",g,b.indicator))},"number_chars/2":function(a,c,b){var g,d=b.args[0],f=b.args[1];if(e.type.is_variable(d)&&e.type.is_variable(f))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(d)||e.type.is_number(d))if(e.type.is_variable(f)||
e.type.is_list(f)){var h=e.type.is_variable(d);if(!e.type.is_variable(f)){var k=f,n=!0;for(g="";"./2"===k.indicator;){if(e.type.is_character(k.args[0]))g+=k.args[0].id;else if(e.type.is_variable(k.args[0]))n=!1;else if(!e.type.is_variable(k.args[0])){a.throwError(e.error.type("character",k.args[0],b.indicator));return}k=k.args[1]}n=n&&e.type.is_empty_list(k);if(!e.type.is_empty_list(k)&&!e.type.is_variable(k)){a.throwError(e.error.type("list",f,b.indicator));return}if(!n&&h){a.throwError(e.error.instantiation(b.indicator));
return}if(n){e.type.is_variable(k)&&h?a.throwError(e.error.instantiation(b.indicator)):(g=a.parse(g),f=g.value,!e.type.is_number(f)||g.tokens[g.tokens.length-1].space?a.throwError(e.error.syntax_by_predicate("parseable_number",b.indicator)):a.prepend([new r(c.goal.replace(new l("=",[d,f])),c.substitution,c)]));return}}if(!h){g=d.toString();b=new l("[]");for(d=g.length-1;0<=d;d--)b=new l(".",[new l(g.charAt(d)),b]);a.prepend([new r(c.goal.replace(new l("=",[f,b])),c.substitution,c)])}}else a.throwError(e.error.type("list",
f,b.indicator));else a.throwError(e.error.type("number",d,b.indicator))},"number_codes/2":function(a,c,b){var g,d=b.args[0],f=b.args[1];if(e.type.is_variable(d)&&e.type.is_variable(f))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(d)||e.type.is_number(d))if(e.type.is_variable(f)||e.type.is_list(f)){var h=e.type.is_variable(d);if(!e.type.is_variable(f)){var k=f,n=!0;for(g="";"./2"===k.indicator;){if(e.type.is_character_code(k.args[0]))g+=M(k.args[0].value);else if(e.type.is_variable(k.args[0]))n=
!1;else if(!e.type.is_variable(k.args[0])){a.throwError(e.error.type("character_code",k.args[0],b.indicator));return}k=k.args[1]}n=n&&e.type.is_empty_list(k);if(!e.type.is_empty_list(k)&&!e.type.is_variable(k)){a.throwError(e.error.type("list",f,b.indicator));return}if(!n&&h){a.throwError(e.error.instantiation(b.indicator));return}if(n){e.type.is_variable(k)&&h?a.throwError(e.error.instantiation(b.indicator)):(g=a.parse(g),f=g.value,!e.type.is_number(f)||g.tokens[g.tokens.length-1].space?a.throwError(e.error.syntax_by_predicate("parseable_number",
b.indicator)):a.prepend([new r(c.goal.replace(new l("=",[d,f])),c.substitution,c)]));return}}if(!h){g=d.toString();b=new l("[]");for(d=g.length-1;0<=d;d--)b=new l(".",[new t(L(g,d),!1),b]);a.prepend([new r(c.goal.replace(new l("=",[f,b])),c.substitution,c)])}}else a.throwError(e.error.type("list",f,b.indicator));else a.throwError(e.error.type("number",d,b.indicator))},"upcase_atom/2":function(a,c,b){var g=b.args[0],d=b.args[1];e.type.is_variable(g)?a.throwError(e.error.instantiation(b.indicator)):
e.type.is_atom(g)?e.type.is_variable(d)||e.type.is_atom(d)?a.prepend([new r(c.goal.replace(new l("=",[d,new l(g.id.toUpperCase(),[])])),c.substitution,c)]):a.throwError(e.error.type("atom",d,b.indicator)):a.throwError(e.error.type("atom",g,b.indicator))},"downcase_atom/2":function(a,c,b){var g=b.args[0],d=b.args[1];e.type.is_variable(g)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_atom(g)?e.type.is_variable(d)||e.type.is_atom(d)?a.prepend([new r(c.goal.replace(new l("=",[d,new l(g.id.toLowerCase(),
[])])),c.substitution,c)]):a.throwError(e.error.type("atom",d,b.indicator)):a.throwError(e.error.type("atom",g,b.indicator))},"atomic_list_concat/2":function(a,c,b){var g=b.args[1];a.prepend([new r(c.goal.replace(new l("atomic_list_concat",[b.args[0],new l("",[]),g])),c.substitution,c)])},"atomic_list_concat/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];if(e.type.is_variable(d)||e.type.is_variable(g)&&e.type.is_variable(f))a.throwError(e.error.instantiation(b.indicator));else if(e.type.is_variable(g)||
e.type.is_list(g))if(e.type.is_variable(f)||e.type.is_atom(f))if(e.type.is_variable(f)){for(var h="",k=g;e.type.is_term(k)&&"./2"===k.indicator;){if(!e.type.is_atom(k.args[0])&&!e.type.is_number(k.args[0])){a.throwError(e.error.type("atomic",k.args[0],b.indicator));return}""!==h&&(h+=d.id);h=e.type.is_atom(k.args[0])?h+k.args[0].id:h+(""+k.args[0].value);k=k.args[1]}h=new l(h,[]);e.type.is_variable(k)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_term(k)&&"[]/0"===k.indicator?a.prepend([new r(c.goal.replace(new l("=",
[h,f])),c.substitution,c)]):a.throwError(e.error.type("list",g,b.indicator))}else b=D(J(f.id.split(d.id),function(a){return new l(a,[])})),a.prepend([new r(c.goal.replace(new l("=",[b,g])),c.substitution,c)]);else a.throwError(e.error.type("atom",f,b.indicator));else a.throwError(e.error.type("list",g,b.indicator))},"@=</2":function(a,c,b){0>=e.compare(b.args[0],b.args[1])&&a.success(c)},"==/2":function(a,c,b){0===e.compare(b.args[0],b.args[1])&&a.success(c)},"\\==/2":function(a,c,b){0!==e.compare(b.args[0],
b.args[1])&&a.success(c)},"@</2":function(a,c,b){0>e.compare(b.args[0],b.args[1])&&a.success(c)},"@>/2":function(a,c,b){0<e.compare(b.args[0],b.args[1])&&a.success(c)},"@>=/2":function(a,c,b){0<=e.compare(b.args[0],b.args[1])&&a.success(c)},"compare/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];e.type.is_variable(g)||e.type.is_atom(g)?e.type.is_atom(g)&&-1===["<",">","="].indexOf(g.id)?a.throwError(e.type.domain("order",g,b.indicator)):(b=e.compare(d,f),a.prepend([new r(c.goal.replace(new l("=",
[g,new l(0===b?"=":-1===b?"<":">",[])])),c.substitution,c)])):a.throwError(e.error.type("atom",g,b.indicator))},"is/2":function(a,c,b){var g=b.args[1].interpret(a);e.type.is_number(g)?a.prepend([new r(c.goal.replace(new l("=",[b.args[0],g],a.level)),c.substitution,c)]):a.throwError(g)},"between/3":function(a,c,b){var g=b.args[0],d=b.args[1],f=b.args[2];e.type.is_variable(g)||e.type.is_variable(d)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_integer(g)?e.type.is_integer(d)?e.type.is_variable(f)||
e.type.is_integer(f)?e.type.is_variable(f)?(b=[new r(c.goal.replace(new l("=",[f,g])),c.substitution,c)],g.value<d.value&&b.push(new r(c.goal.replace(new l("between",[new t(g.value+1,!1),d,f])),c.substitution,c)),a.prepend(b)):g.value<=f.value&&d.value>=f.value&&a.success(c):a.throwError(e.error.type("integer",f,b.indicator)):a.throwError(e.error.type("integer",d,b.indicator)):a.throwError(e.error.type("integer",g,b.indicator))},"succ/2":function(a,c,b){var g=b.args[0],d=b.args[1];if(e.type.is_variable(g)&&
e.type.is_variable(d))a.throwError(e.error.instantiation(b.indicator));else if(!e.type.is_variable(g)&&!e.type.is_integer(g))a.throwError(e.error.type("integer",g,b.indicator));else if(!e.type.is_variable(d)&&!e.type.is_integer(d))a.throwError(e.error.type("integer",d,b.indicator));else if(!e.type.is_variable(g)&&0>g.value)a.throwError(e.error.domain("not_less_than_zero",g,b.indicator));else if(!e.type.is_variable(d)&&0>d.value)a.throwError(e.error.domain("not_less_than_zero",d,b.indicator));else if(e.type.is_variable(d)||
0<d.value)e.type.is_variable(g)?a.prepend([new r(c.goal.replace(new l("=",[g,new t(d.value-1,!1)])),c.substitution,c)]):a.prepend([new r(c.goal.replace(new l("=",[d,new t(g.value+1,!1)])),c.substitution,c)])},"=:=/2":function(a,c,b){b=e.arithmetic_compare(a,b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0===b&&a.success(c)},"=\\=/2":function(a,c,b){b=e.arithmetic_compare(a,b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0!==b&&a.success(c)},"</2":function(a,c,b){b=e.arithmetic_compare(a,
b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0>b&&a.success(c)},"=</2":function(a,c,b){b=e.arithmetic_compare(a,b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0>=b&&a.success(c)},">/2":function(a,c,b){b=e.arithmetic_compare(a,b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0<b&&a.success(c)},">=/2":function(a,c,b){b=e.arithmetic_compare(a,b.args[0],b.args[1]);e.type.is_term(b)?a.throwError(b):0<=b&&a.success(c)},"var/1":function(a,c,b){e.type.is_variable(b.args[0])&&a.success(c)},
"atom/1":function(a,c,b){e.type.is_atom(b.args[0])&&a.success(c)},"atomic/1":function(a,c,b){e.type.is_atomic(b.args[0])&&a.success(c)},"compound/1":function(a,c,b){e.type.is_compound(b.args[0])&&a.success(c)},"integer/1":function(a,c,b){e.type.is_integer(b.args[0])&&a.success(c)},"float/1":function(a,c,b){e.type.is_float(b.args[0])&&a.success(c)},"number/1":function(a,c,b){e.type.is_number(b.args[0])&&a.success(c)},"nonvar/1":function(a,c,b){e.type.is_variable(b.args[0])||a.success(c)},"ground/1":function(a,
c,b){0===b.variables().length&&a.success(c)},"acyclic_term/1":function(a,c,b){var d=c.substitution.apply(c.substitution);b=b.args[0].variables();for(var e=0;e<b.length;e++)if(!c.substitution.links[b[e]].equals(d.links[b[e]]))return;a.success(c)},"callable/1":function(a,c,b){e.type.is_callable(b.args[0])&&a.success(c)},"halt/0":function(a,c,b){a.points=[]},"halt/1":function(a,c,b){c=b.args[0];e.type.is_variable(c)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_integer(c)?a.points=[]:a.throwError(e.error.type("integer",
c,b.indicator))},"current_prolog_flag/2":function(a,c,b){var d=b.args[0],g=b.args[1];if(e.type.is_variable(d)||e.type.is_atom(d))if(e.type.is_variable(d)||e.type.is_flag(d)){b=[];for(var f in e.flag)if(e.flag.hasOwnProperty(f)){var h=new l(",",[new l("=",[new l(f),d]),new l("=",[a.getFlag(f),g])]);b.push(new r(c.goal.replace(h),c.substitution,c))}a.prepend(b)}else a.throwError(e.error.domain("prolog_flag",d,b.indicator));else a.throwError(e.error.type("atom",d,b.indicator))},"set_prolog_flag/2":function(a,
c,b){var d=b.args[0],g=b.args[1];e.type.is_variable(d)||e.type.is_variable(g)?a.throwError(e.error.instantiation(b.indicator)):e.type.is_atom(d)?e.type.is_flag(d)?e.type.is_value_flag(d,g)?e.type.is_modifiable_flag(d)?(a.session.flag[d.id]=g,a.success(c)):a.throwError(e.error.permission("modify","flag",d)):a.throwError(e.error.domain("flag_value",new l("+",[d,g]),b.indicator)):a.throwError(e.error.domain("prolog_flag",d,b.indicator)):a.throwError(e.error.type("atom",d,b.indicator))}},flag:{bounded:{allowed:[new l("true"),
new l("false")],value:new l("true"),changeable:!1},max_integer:{allowed:[new t(Number.MAX_SAFE_INTEGER)],value:new t(Number.MAX_SAFE_INTEGER),changeable:!1},min_integer:{allowed:[new t(Number.MIN_SAFE_INTEGER)],value:new t(Number.MIN_SAFE_INTEGER),changeable:!1},integer_rounding_function:{allowed:[new l("down"),new l("toward_zero")],value:new l("toward_zero"),changeable:!1},char_conversion:{allowed:[new l("on"),new l("off")],value:new l("on"),changeable:!0},debug:{allowed:[new l("on"),new l("off")],
value:new l("off"),changeable:!0},max_arity:{allowed:[new l("unbounded")],value:new l("unbounded"),changeable:!1},unknown:{allowed:[new l("error"),new l("fail"),new l("warning")],value:new l("error"),changeable:!0},double_quotes:{allowed:[new l("chars"),new l("codes"),new l("atom")],value:new l("codes"),changeable:!0},occurs_check:{allowed:[new l("false"),new l("true")],value:new l("false"),changeable:!0},dialect:{allowed:[new l("tau")],value:new l("tau"),changeable:!1},version_data:{allowed:[new l("tau",
[new t(I.major,!1),new t(I.minor,!1),new t(I.patch,!1),new l(I.status)])],value:new l("tau",[new t(I.major,!1),new t(I.minor,!1),new t(I.patch,!1),new l(I.status)]),changeable:!1},nodejs:{allowed:[new l("yes"),new l("no")],value:new l("undefined"!==typeof module&&module.exports?"yes":"no"),changeable:!1}},unify:function(a,c,b){b=void 0===b?!1:b;if(this.type.is_anonymous_var(a))return new r(c,new B);if(this.type.is_anonymous_var(c))return new r(a,new B);if(this.type.is_variable(c)){var d={};if(b&&
-1!==C(a.variables(),c.id)&&!e.type.is_variable(a))return null;d[c.id]=a;return new r(a,new B(d))}return a.unify(c,b)},compare:function(a,c){var b=e.type.compare(a,c);return 0!==b?b:a.compare(c)},arithmetic_compare:function(a,c,b){c=c.interpret(a);return e.type.is_number(c)?(a=b.interpret(a),e.type.is_number(a)?c.value<a.value?-1:c.value>a.value?1:0:a):c},operate:function(a,c){if(e.type.is_operator(c)){for(var b=e.type.is_operator(c),d=[],g,f=!1,h=0;h<c.args.length;h++){g=c.args[h].interpret(a);if(e.type.is_number(g)){if(null!==
b.type_args&&g.is_float!==b.type_args)return e.error.type(b.type_args?"float":"integer",g,a.__call_indicator);d.push(g.value)}else return g;f=f||g.is_float}d.push(a);g=e.arithmetic.evaluation[c.indicator].fn.apply(this,d);f=null===b.type_result?f:b.type_result;return e.type.is_term(g)?g:g===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY?e.error.evaluation("overflow",a.__call_indicator):!1===f&&"true"===a.getFlag("bounded").id&&(g>a.getFlag("max_integer").value||g<a.getFlag("min_integer").value)?
e.error.evaluation("int_overflow",a.__call_indicator):new t(g,f)}return e.error.type("evaluable",c.indicator,a.__call_indicator)},error:{existence:function(a,c,b){return new l("error",[new l("existence_error",[new l(a),G(c)]),G(b)])},type:function(a,c,b){return new l("error",[new l("type_error",[new l(a),c]),G(b)])},instantiation:function(a){return new l("error",[new l("instantiation_error"),G(a)])},domain:function(a,c,b){return new l("error",[new l("domain_error",[new l(a),c]),G(b)])},representation:function(a,
c){return new l("error",[new l("representation_error",[new l(a)]),G(c)])},permission:function(a,c,b,d){return new l("error",[new l("permission_error",[new l(a),new l(c),b]),G(d)])},evaluation:function(a,c){return new l("error",[new l("evaluation_error",[new l(a)]),G(c)])},syntax:function(a,c,b){a=a||{value:"",line:0,column:0,matches:[""],start:0};var d=b&&0<a.matches.length?a.start+a.matches[0].length:a.start;b=b?new l("token_not_found"):new l("found",[new l(a.value.toString())]);a=new l(".",[new l("line",
[new t(a.line+1)]),new l(".",[new l("column",[new t(d+1)]),new l(".",[b,new l("[]",[])])])]);return new l("error",[new l("syntax_error",[new l(c)]),a])},syntax_by_predicate:function(a,c){return new l("error",[new l("syntax_error",[new l(a)]),G(c)])}},warning:{singleton:function(a,c,b){for(var d=new l("[]"),e=a.length-1;0<=e;e--)d=new l(".",[new x(a[e]),d]);return new l("warning",[new l("singleton_variables",[d,G(c)]),new l(".",[new l("line",[new t(b,!1)]),new l("[]")])])},failed_goal:function(a,c){return new l("warning",
[new l("failed_goal",[a]),new l(".",[new l("line",[new t(c,!1)]),new l("[]")])])}},format_variable:function(a){return"_"+a},format_answer:function(a,c){c instanceof A&&(c=c.thread);if(e.type.is_error(a))return"uncaught exception: "+a.args[0].toString();if(!1===a)return"false.";if(null===a)return"limit exceeded ;";var b=0,d="";if(e.type.is_substitution(a)){var g=a.domain(!0);a=a.filter(function(a,b){return!e.type.is_variable(b)||-1!==g.indexOf(b.id)&&a!==b.id})}for(var f in a.links)a.links.hasOwnProperty(f)&&
(b++,""!==d&&(d+=", "),d+=f.toString()+" = "+a.links[f].toString());a="undefined"===typeof c||0<c.points.length?" ;":".";return 0===b?"true"+a:d+a},flatten_error:function(a){if(!e.type.is_error(a))return null;a=a.args[0];var c={};c.type=a.args[0].id;c.thrown="syntax_error"===c.type?null:a.args[1].id;c.expected=null;c.found=null;c.representation=null;c.existence=null;c.existence_type=null;c.line=null;c.column=null;c.permission_operation=null;c.permission_type=null;c.evaluation_type=null;"type_error"===
c.type||"domain_error"===c.type?(c.expected=a.args[0].args[0].id,c.found=a.args[0].args[1].toString()):"syntax_error"===c.type?"./2"===a.args[1].indicator?(c.expected=a.args[0].args[0].id,c.found=a.args[1].args[1].args[1].args[0],c.found="token_not_found"===c.found.id?c.found.id:c.found.args[0].id,c.line=a.args[1].args[0].args[0].value,c.column=a.args[1].args[1].args[0].args[0].value):c.thrown=a.args[1].id:"permission_error"===c.type?(c.found=a.args[0].args[2].toString(),c.permission_operation=a.args[0].args[0].id,
c.permission_type=a.args[0].args[1].id):"evaluation_error"===c.type?c.evaluation_type=a.args[0].args[0].id:"representation_error"===c.type?c.representation=a.args[0].args[0].id:"existence_error"===c.type&&(c.existence=a.args[0].args[1].toString(),c.existence_type=a.args[0].args[0].id);return c},create:function(a){return new e.type.Session(a)}};"undefined"!==typeof module?module.exports=e:window.pl=e})();var pl;
(function(a){var u=function(){return{"append/2":[new a.type.Rule(new a.type.Term("append",[new a.type.Var("X"),new a.type.Var("L")]),new a.type.Term("foldl",[new a.type.Term("append",[]),new a.type.Var("X"),new a.type.Term("[]",[]),new a.type.Var("L")]))],"append/3":[new a.type.Rule(new a.type.Term("append",[new a.type.Term("[]",[]),new a.type.Var("X"),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("append",[new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("X"),
new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("S")])]),new a.type.Term("append",[new a.type.Var("T"),new a.type.Var("X"),new a.type.Var("S")]))],"member/2":[new a.type.Rule(new a.type.Term("member",[new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("_")])]),null),new a.type.Rule(new a.type.Term("member",[new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("_"),new a.type.Var("Xs")])]),new a.type.Term("member",[new a.type.Var("X"),new a.type.Var("Xs")]))],"permutation/2":[new a.type.Rule(new a.type.Term("permutation",
[new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("permutation",[new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("permutation",[new a.type.Var("T"),new a.type.Var("P")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("P")]),new a.type.Term("append",[new a.type.Var("X"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("Y")]),
new a.type.Var("S")])])]))],"maplist/2":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("X")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("Xs")])]))],"maplist/3":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),
new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs")])]))],"maplist/4":[new a.type.Rule(new a.type.Term("maplist",
[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C")]),new a.type.Term("maplist",
[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs")])]))],"maplist/5":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),
new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds")])]))],"maplist/6":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",
[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),
new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es")])]))],"maplist/7":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("maplist",
[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")]),new a.type.Term(".",[new a.type.Var("F"),new a.type.Var("Fs")])]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),
new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E"),new a.type.Var("F")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es"),new a.type.Var("Fs")])]))],"maplist/8":[new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",[]),new a.type.Term("[]",
[])]),null),new a.type.Rule(new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("A"),new a.type.Var("As")]),new a.type.Term(".",[new a.type.Var("B"),new a.type.Var("Bs")]),new a.type.Term(".",[new a.type.Var("C"),new a.type.Var("Cs")]),new a.type.Term(".",[new a.type.Var("D"),new a.type.Var("Ds")]),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Es")]),new a.type.Term(".",[new a.type.Var("F"),new a.type.Var("Fs")]),new a.type.Term(".",[new a.type.Var("G"),new a.type.Var("Gs")])]),
new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P"),new a.type.Var("A"),new a.type.Var("B"),new a.type.Var("C"),new a.type.Var("D"),new a.type.Var("E"),new a.type.Var("F"),new a.type.Var("G")]),new a.type.Term("maplist",[new a.type.Var("P"),new a.type.Var("As"),new a.type.Var("Bs"),new a.type.Var("Cs"),new a.type.Var("Ds"),new a.type.Var("Es"),new a.type.Var("Fs"),new a.type.Var("Gs")])]))],"include/3":[new a.type.Rule(new a.type.Term("include",[new a.type.Var("_"),new a.type.Term("[]",
[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("include",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("A")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("A"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Term("[]",[])]),new a.type.Var("B")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("F"),new a.type.Var("B")]),
new a.type.Term(",",[new a.type.Term(";",[new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("F")]),new a.type.Term(",",[new a.type.Term("=",[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("S")])]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("L"),new a.type.Var("S")])]),new a.type.Term("include",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("S")])])])])]))],"exclude/3":[new a.type.Rule(new a.type.Term("exclude",[new a.type.Var("_"),
new a.type.Term("[]",[]),new a.type.Term("[]",[])]),null),new a.type.Rule(new a.type.Term("exclude",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("exclude",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("E")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("H"),
new a.type.Term("[]",[])]),new a.type.Var("Q")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("R"),new a.type.Var("Q")]),new a.type.Term(";",[new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("R")]),new a.type.Term(",",[new a.type.Term("!",[]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("E")])])]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("E")])])])])])])]))],"foldl/4":[new a.type.Rule(new a.type.Term("foldl",
[new a.type.Var("_"),new a.type.Term("[]",[]),new a.type.Var("I"),new a.type.Var("I")]),null),new a.type.Rule(new a.type.Term("foldl",[new a.type.Var("P"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Var("T")]),new a.type.Var("I"),new a.type.Var("R")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P"),new a.type.Var("L")]),new a.type.Term(",",[new a.type.Term("append",[new a.type.Var("L"),new a.type.Term(".",[new a.type.Var("I"),new a.type.Term(".",[new a.type.Var("H"),new a.type.Term(".",
[new a.type.Var("X"),new a.type.Term("[]",[])])])]),new a.type.Var("L2")]),new a.type.Term(",",[new a.type.Term("=..",[new a.type.Var("P2"),new a.type.Var("L2")]),new a.type.Term(",",[new a.type.Term("call",[new a.type.Var("P2")]),new a.type.Term("foldl",[new a.type.Var("P"),new a.type.Var("T"),new a.type.Var("X"),new a.type.Var("R")])])])])]))],"select/3":[new a.type.Rule(new a.type.Term("select",[new a.type.Var("E"),new a.type.Term(".",[new a.type.Var("E"),new a.type.Var("Xs")]),new a.type.Var("Xs")]),
null),new a.type.Rule(new a.type.Term("select",[new a.type.Var("E"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Ys")])]),new a.type.Term("select",[new a.type.Var("E"),new a.type.Var("Xs"),new a.type.Var("Ys")]))],"sum_list/2":[new a.type.Rule(new a.type.Term("sum_list",[new a.type.Term("[]",[]),new a.type.Num(0,!1)]),null),new a.type.Rule(new a.type.Term("sum_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),
new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("sum_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term("is",[new a.type.Var("S"),new a.type.Term("+",[new a.type.Var("X"),new a.type.Var("Y")])])]))],"max_list/2":[new a.type.Rule(new a.type.Term("max_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("max_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),
new a.type.Term(",",[new a.type.Term("max_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term(";",[new a.type.Term(",",[new a.type.Term(">=",[new a.type.Var("X"),new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("X")]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("Y")])])]))],"min_list/2":[new a.type.Rule(new a.type.Term("min_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),
new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("min_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("min_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term(";",[new a.type.Term(",",[new a.type.Term("=<",[new a.type.Var("X"),new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("=",[new a.type.Var("S"),new a.type.Var("X")]),new a.type.Term("!",[])])]),new a.type.Term("=",[new a.type.Var("S"),
new a.type.Var("Y")])])]))],"prod_list/2":[new a.type.Rule(new a.type.Term("prod_list",[new a.type.Term("[]",[]),new a.type.Num(1,!1)]),null),new a.type.Rule(new a.type.Term("prod_list",[new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("S")]),new a.type.Term(",",[new a.type.Term("prod_list",[new a.type.Var("Xs"),new a.type.Var("Y")]),new a.type.Term("is",[new a.type.Var("S"),new a.type.Term("*",[new a.type.Var("X"),new a.type.Var("Y")])])]))],"last/2":[new a.type.Rule(new a.type.Term("last",
[new a.type.Term(".",[new a.type.Var("X"),new a.type.Term("[]",[])]),new a.type.Var("X")]),null),new a.type.Rule(new a.type.Term("last",[new a.type.Term(".",[new a.type.Var("_"),new a.type.Var("Xs")]),new a.type.Var("X")]),new a.type.Term("last",[new a.type.Var("Xs"),new a.type.Var("X")]))],"prefix/2":[new a.type.Rule(new a.type.Term("prefix",[new a.type.Var("Part"),new a.type.Var("Whole")]),new a.type.Term("append",[new a.type.Var("Part"),new a.type.Var("_"),new a.type.Var("Whole")]))],"nth0/3":[new a.type.Rule(new a.type.Term("nth0",
[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")])]),new a.type.Term(",",[new a.type.Term(">=",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")]),
new a.type.Term("!",[])])])]))],"nth1/3":[new a.type.Rule(new a.type.Term("nth1",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")])]),new a.type.Term(",",[new a.type.Term(">",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(1,
!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("_")]),new a.type.Term("!",[])])])]))],"nth0/4":[new a.type.Rule(new a.type.Term("nth0",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")])]),new a.type.Term(",",[new a.type.Term(">=",
[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(0,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term("!",[])])])]))],"nth1/4":[new a.type.Rule(new a.type.Term("nth1",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term("var",[new a.type.Var("X")]),new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),
new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")])]),new a.type.Term(",",[new a.type.Term(">",[new a.type.Var("X"),new a.type.Num(0,!1)]),new a.type.Term(",",[new a.type.Term("nth",[new a.type.Num(1,!1),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z"),new a.type.Var("W")]),new a.type.Term("!",[])])])]))],"nth/5":[new a.type.Rule(new a.type.Term("nth",[new a.type.Var("N"),new a.type.Var("N"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("X"),new a.type.Var("Xs")]),
null),new a.type.Rule(new a.type.Term("nth",[new a.type.Var("N"),new a.type.Var("O"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Xs")]),new a.type.Var("Y"),new a.type.Term(".",[new a.type.Var("X"),new a.type.Var("Ys")])]),new a.type.Term(",",[new a.type.Term("is",[new a.type.Var("M"),new a.type.Term("+",[new a.type.Var("N"),new a.type.Num(1,!1)])]),new a.type.Term("nth",[new a.type.Var("M"),new a.type.Var("O"),new a.type.Var("Xs"),new a.type.Var("Y"),new a.type.Var("Ys")])]))],"length/2":function(q,
p,m){var d=m.args[0],k=m.args[1];a.type.is_variable(k)||a.type.is_integer(k)?a.type.is_integer(k)&&0>k.value?q.throwError(a.error.domain("not_less_than_zero",k,m.indicator)):(m=new a.type.Term("length",[d,new a.type.Num(0,!1),k]),a.type.is_integer(k)&&(m=new a.type.Term(",",[m,new a.type.Term("!",[])])),q.prepend([new a.type.State(p.goal.replace(m),p.substitution,p)])):q.throwError(a.error.type("integer",k,m.indicator))},"length/3":[new a.type.Rule(new a.type.Term("length",[new a.type.Term("[]",[]),
new a.type.Var("N"),new a.type.Var("N")]),null),new a.type.Rule(new a.type.Term("length",[new a.type.Term(".",[new a.type.Var("_"),new a.type.Var("X")]),new a.type.Var("A"),new a.type.Var("N")]),new a.type.Term(",",[new a.type.Term("is",[new a.type.Var("B"),new a.type.Term("+",[new a.type.Var("A"),new a.type.Num(1,!1)])]),new a.type.Term("length",[new a.type.Var("X"),new a.type.Var("B"),new a.type.Var("N")])]))],"replicate/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];if(a.type.is_variable(k))q.throwError(a.error.instantiation(m.indicator));
else if(a.type.is_integer(k))if(0>k.value)q.throwError(a.error.domain("not_less_than_zero",k,m.indicator));else if(a.type.is_variable(h)||a.type.is_list(h)){m=new a.type.Term("[]");for(var f=0;f<k.value;f++)m=new a.type.Term(".",[d,m]);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[m,h])),p.substitution,p)])}else q.throwError(a.error.type("list",h,m.indicator));else q.throwError(a.error.type("integer",k,m.indicator))},"sort/2":function(q,p,m){var d=m.args[0],k=m.args[1];if(a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));
else if(a.type.is_variable(k)||a.type.is_fully_list(k)){for(var h=[],f=d;"./2"===f.indicator;)h.push(f.args[0]),f=f.args[1];if(a.type.is_variable(f))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_empty_list(f)){m=h.sort(a.compare);d=new a.type.Term("[]");for(h=m.length-1;0<=h;h--)d=new a.type.Term(".",[m[h],d]);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[d,k])),p.substitution,p)])}else q.throwError(a.error.type("list",d,m.indicator))}else q.throwError(a.error.type("list",
k,m.indicator))},"keysort/2":function(q,p,m){var d=m.args[0],k=m.args[1];if(a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_variable(k)||a.type.is_fully_list(k)){for(var h=[],f,n=d;"./2"===n.indicator;){f=n.args[0];if(a.type.is_variable(f)){q.throwError(a.error.instantiation(m.indicator));return}if(!a.type.is_term(f)||"-/2"!==f.indicator){q.throwError(a.error.type("pair",f,m.indicator));return}f.args[0].pair=f.args[1];h.push(f.args[0]);n=n.args[1]}if(a.type.is_variable(n))q.throwError(a.error.instantiation(m.indicator));
else if(a.type.is_empty_list(n)){m=h.sort(a.compare);d=new a.type.Term("[]");for(h=m.length-1;0<=h;h--)d=new a.type.Term(".",[new a.type.Term("-",[m[h],m[h].pair]),d]),delete m[h].pair;q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[d,k])),p.substitution,p)])}else q.throwError(a.error.type("list",d,m.indicator))}else q.throwError(a.error.type("list",k,m.indicator))},"take/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];if(a.type.is_variable(k)||a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));
else if(a.type.is_list(k))if(a.type.is_integer(d))if(a.type.is_variable(h)||a.type.is_list(h)){m=d.value;for(d=[];0<m&&"./2"===k.indicator;)d.push(k.args[0]),k=k.args[1],m--;if(0===m){k=new a.type.Term("[]");for(m=d.length-1;0<=m;m--)k=new a.type.Term(".",[d[m],k]);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[k,h])),p.substitution,p)])}}else q.throwError(a.error.type("list",h,m.indicator));else q.throwError(a.error.type("integer",d,m.indicator));else q.throwError(a.error.type("list",
k,m.indicator))},"drop/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];if(a.type.is_variable(k)||a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_list(k))if(a.type.is_integer(d))if(a.type.is_variable(h)||a.type.is_list(h)){m=d.value;for(d=[];0<m&&"./2"===k.indicator;)d.push(k.args[0]),k=k.args[1],m--;0===m&&q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[k,h])),p.substitution,p)])}else q.throwError(a.error.type("list",h,m.indicator));
else q.throwError(a.error.type("integer",d,m.indicator));else q.throwError(a.error.type("list",k,m.indicator))},"reverse/2":function(q,p,m){var d=m.args[0],k=m.args[1],h=a.type.is_instantiated_list(d),f=a.type.is_instantiated_list(k);if(a.type.is_variable(d)&&a.type.is_variable(k))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_variable(d)||a.type.is_fully_list(d))if(a.type.is_variable(k)||a.type.is_fully_list(k))if(h||f){m=h?d:k;for(f=new a.type.Term("[]",[]);"./2"===m.indicator;)f=
new a.type.Term(".",[m.args[0],f]),m=m.args[1];q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[f,h?k:d])),p.substitution,p)])}else q.throwError(a.error.instantiation(m.indicator));else q.throwError(a.error.type("list",k,m.indicator));else q.throwError(a.error.type("list",d,m.indicator))},"list_to_set/2":function(q,p,m){var d=m.args[0],k=m.args[1];if(a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));else{for(var h=d,f=[];"./2"===h.indicator;)f.push(h.args[0]),h=
h.args[1];if(a.type.is_variable(h))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_term(h)&&"[]/0"===h.indicator){m=[];d=new a.type.Term("[]",[]);for(var n=0;n<f.length;n++){h=!1;for(var y=0;y<m.length&&!h;y++)h=0===a.compare(f[n],m[y]);h||m.push(f[n])}for(n=m.length-1;0<=n;n--)d=new a.type.Term(".",[m[n],d]);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[k,d])),p.substitution,p)])}else q.throwError(a.error.type("list",d,m.indicator))}}}},w="append/2 append/3 member/2 permutation/2 maplist/2 maplist/3 maplist/4 maplist/5 maplist/6 maplist/7 maplist/8 include/3 exclude/3 foldl/4 sum_list/2 max_list/2 min_list/2 prod_list/2 last/2 prefix/2 nth0/3 nth1/3 nth0/4 nth1/4 length/2 replicate/3 select/3 sort/2 keysort/2 take/3 drop/3 reverse/2 list_to_set/2".split(" ");
"undefined"!==typeof module?module.exports=function(q){a=q;new a.type.Module("lists",u(),w)}:new a.type.Module("lists",u(),w)})(pl);
(function(a){var u=function(){return{"maybe/0":function(a,p,m){.5>Math.random()&&a.success(p)},"maybe/1":function(a,p,m){Math.random()<m.args[0].value&&a.success(p)},"random/1":function(q,p,m){var d=m.args[0];a.type.is_variable(d)||a.type.is_number(d)?q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[d,new a.type.Num(Math.random(),!0)])),p.substitution,p)]):q.throwError(a.error.type("number",d,m.indicator))},"random/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];a.type.is_variable(d)||
a.type.is_variable(k)?q.throwError(a.error.instantiation(m.indicator)):a.type.is_number(d)?a.type.is_number(k)?a.type.is_variable(h)||a.type.is_number(h)?d.value<k.value&&(m=d.is_float||k.is_float,d=d.value+Math.random()*(k.value-d.value),m||(d=Math.floor(d)),q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[h,new a.type.Num(d,m)])),p.substitution,p)])):q.throwError(a.error.type("number",h,m.indicator)):q.throwError(a.error.type("number",k,m.indicator)):q.throwError(a.error.type("number",
d,m.indicator))},"random_between/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];a.type.is_variable(d)||a.type.is_variable(k)?q.throwError(a.error.instantiation(m.indicator)):a.type.is_integer(d)?a.type.is_integer(k)?a.type.is_variable(h)||a.type.is_integer(h)?d.value<k.value&&q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[h,new a.type.Num(Math.floor(d.value+Math.random()*(k.value-d.value+1)),!1)])),p.substitution,p)]):q.throwError(a.error.type("integer",h,m.indicator)):
q.throwError(a.error.type("integer",k,m.indicator)):q.throwError(a.error.type("integer",d,m.indicator))},"random_member/2":function(q,p,m){var d=m.args[0],k=m.args[1];if(a.type.is_variable(k))q.throwError(a.error.instantiation(m.indicator));else{for(m=[];"./2"==k.indicator;)m.push(k.args[0]),k=k.args[1];0<m.length&&q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[d,m[Math.floor(Math.random()*m.length)]])),p.substitution,p)])}},"random_permutation/2":function(q,p,m){var d=m.args[0],
k=m.args[1],h=a.type.is_instantiated_list(d);var f=a.type.is_instantiated_list(k);if(a.type.is_variable(d)&&a.type.is_variable(k)||!h&&!f)q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_variable(d)||a.type.is_fully_list(d))if(a.type.is_variable(k)||a.type.is_fully_list(k)){f=h?d:k;for(m=[];"./2"===f.indicator;)m.push(f.args[0]),f=f.args[1];for(f=0;f<m.length;f++){var n=Math.floor(Math.random()*m.length),y=m[f];m[f]=m[n];m[n]=y}n=new a.type.Term("[]",[]);for(f=m.length-1;0<=f;f--)n=
new a.type.Term(".",[m[f],n]);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[n,h?k:d])),p.substitution,p)])}else q.throwError(a.error.type("list",k,m.indicator));else q.throwError(a.error.type("list",d,m.indicator))}}},w="maybe/0 maybe/1 random/1 random/3 random_between/3 random_member/2 random_permutation/2".split(" ");"undefined"!==typeof module?module.exports=function(q){a=q;new a.type.Module("random",u(),w)}:new a.type.Module("random",u(),w)})(pl);
(function(a){var u=function(){return{"time/1":function(p,m,d){d=d.args[0];if(a.type.is_variable(d))p.throwError(a.error.instantiation(p.level));else if(a.type.is_callable(d)){var k=p.points;p.points=[new a.type.State(d,m.substitution,m)];var h=Date.now(),f=a.statistics.getCountTerms(),n=p.total_steps,q=p.session.format_success,D=p.session.format_error;p.session.format_success=function(a){return a.substitution};p.session.format_error=function(a){return a.goal};p.__calls.unshift(function(d){var y=Date.now(),
u=a.statistics.getCountTerms(),x=p.total_steps,t=p.points;p.points=k;p.session.format_success=q;p.session.format_error=D;if(a.type.is_error(d))p.throwError(d.args[0]);else if(null===d)p.points=[m].concat(k),p.__calls.shift()(null);else{console.log("% Tau Prolog: executed in "+(y-h)+" milliseconds, "+(u-f)+" atoms created, "+(x-n)+" resolution steps performed.");for(y=0;y<t.length;y++)null===t[y].goal&&(t[y].goal=new a.type.Term("true",[])),t[y].goal=m.goal.replace(new a.type.Term("time",[t[y].goal]));
p.points=[new a.type.State(m.goal.apply(d).replace(null),d,m)].concat(t.concat(k))}})}else p.throwError(a.error.type("callable",d,p.level))},"statistics/0":function(a,m,d){console.log("% Tau Prolog statistics");for(var k in q)console.log("%%% "+k+": "+q[k](a).toString());a.success(m)},"statistics/2":function(p,m,d){var k=d.args[0],h=d.args[1];if(a.type.is_variable(k)||a.type.is_atom(k))if(a.type.is_variable(k)||void 0!==q[k.id])if(a.type.is_variable(k)){d=[];for(var f in q)n=q[f](p),d.push(new a.type.State(m.goal.replace(new a.type.Term(",",
[new a.type.Term("=",[k,new a.type.Term(f,[])]),new a.type.Term("=",[h,n])])),m.substitution,m));p.prepend(d)}else{var n=q[k.id](p);p.prepend([new a.type.State(m.goal.replace(new a.type.Term("=",[h,n])),m.substitution,m)])}else p.throwError(a.error.domain("statistics_key",k,d.indicator));else p.throwError(a.error.type("atom",k,d.indicator))}}},w=["time/1","statistics/0","statistics/2"],q={atoms:function(p){return new a.type.Num(a.statistics.getCountTerms(),!1)},clauses:function(p){var m=0,d;for(d in p.session.rules)p.session.rules[d]instanceof
Array&&(m+=p.session.rules[d].length);for(d=0;d<p.session.modules.length;d++)for(var k=a.module[p.session.modules[d]],h=0;h<k.exports.length;h++){var f=k.rules[k.exports[h]];f instanceof Array&&(m+=f.length)}return new a.type.Num(m,!1)},cputime:function(p){return new a.type.Num(p.cpu_time,!1)},epoch:function(p){return new a.type.Num(p.epoch,!1)},inferences:function(p){return new a.type.Num(p.total_steps,!1)},modules:function(p){return new a.type.Num(p.session.modules.length,!1)},predicates:function(p){for(var m=
Object.keys(p.session.rules).length,d=0;d<p.session.modules.length;d++)m+=a.module[p.session.modules[d]].exports.length;return new a.type.Num(m,!1)},runtime:function(p){return new a.type.Term(".",[new a.type.Num(p.cpu_time,!1),new a.type.Term(".",[new a.type.Num(p.cpu_time_last,!1),new a.type.Term("[]",[])])])},threads:function(p){return new a.type.Num(p.session.total_threads,!1)}};"undefined"!==typeof module?module.exports=function(p){a=p;new a.type.Module("statistics",u(),w)}:new a.type.Module("statistics",
u(),w)})(pl);
(function(a){function u(d){if(void 0!==d&&null!==d){if(a.type.is_number(d))return d.value;if(a.type.is_term(d)&&0===d.args.length)return d.id;if(a.type.is_term(d)&&"px/1"===d.indicator&&a.type.is_number(d.args[0]))return d.args[0].value.toString()+"px";if(a.type.is_term(d)&&"%/1"===d.indicator&&a.type.is_number(d.args[0]))return d.args[0].value.toString()+"%";if(a.type.is_term(d)&&"url/1"===d.indicator&&a.type.is_atom(d.args[0]))return'url("'+d.args[0].id+'")';if(a.type.is_term(d)&&"rgb/3"===d.indicator&&
a.type.is_integer(d.args[0])&&a.type.is_integer(d.args[1])&&a.type.is_integer(d.args[2]))return d.toString()}return!1}function w(d){if(void 0!==d&&null!==d)return/^-?[0-9]*\.?[0-9]*\s*px\s*$/.test(d)?new a.type.Term("px",[new a.type.Num(parseInt(d))]):/^-?[0-9]*\.?[0-9]*\s*%\s*$/.test(d)?new a.type.Term("%",[new a.type.Num(parseFloat(d))]):/^url\(["'].*["']\)$/.test(d)?new a.type.Term("url",[new a.type.Term(d.substring(5,d.length-2))]):/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/.test(d)?(d=d.replace("rgb",
"").replace("(","").replace(")","").split(","),new a.type.Term("rgb",[new a.type.Num(parseInt(d[0]),!1),new a.type.Num(parseInt(d[1]),!1),new a.type.Num(parseInt(d[2]),!1)])):new a.type.Term(d.toString(),[])}var q=function(){return{"bind/4":function(d,k,h){var f=h.args[0],n=h.args[1],p=h.args[2],q=h.args[3];if(a.type.is_variable(f)||a.type.is_variable(n)&&a.type.is_variable(q))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_dom_object(f))if(a.type.is_atom(n))if(a.type.is_variable(p)||
a.type.is_dom_event_object(p))if(a.type.is_variable(q)){if(p=f.object.tau_events?f.object.tau_events[n.id]:void 0,void 0!==p){f=[];for(n=0;n<p.length;n++)f.push(new a.type.State(k.goal.replace(new a.type.Term("=",[q,p[n].goal.rename(d)])),k.substitution,k));d.prepend(f)}}else{var u=new a.type.Thread(d.session),w=new a.type.DOMEvent(n.id);h={};a.type.is_variable(p)&&(h[p.id]=w);var G=new a.type.Substitution(h);h=function(a){w.event=a;u.add_goal(q.apply(G));u.answer(d.__calls[0])};m.add(f.object,n.id,
h);f.object.tau_events=void 0===f.object.tau_events?{}:f.object.tau_events;void 0===f.object.tau_events[n.id]&&(f.object.tau_events[n.id]=[]);f.object.tau_events[n.id].push({goal:q,fn:h});d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[w,p])),k.substitution,k)])}else d.throwError(a.error.type("DOMEventObject",n,h.indicator));else d.throwError(a.error.type("atom",n,h.indicator));else d.throwError(a.error.type("HTMLObject",f,h.indicator))},"unbind/2":function(d,k,h){var f=h.args[0],
n=h.args[1];if(a.type.is_variable(f)||a.type.is_variable(n))d.throwError(a.error.instantiation(h.indicator));else if(!a.type.is_dom_object(f))d.throwError(a.error.type("HTMLObject",f,h.indicator));else if(!a.type.is_atom(n))d.throwError(a.error.type("atom",n,h.indicator));else if(!a.type.is_variable(goal)){if(f.object.tau_events&&f.object.tau_events[n.id]){h=f.object.tau_events[n.id];for(var p=0;p<h.length;p++)m.remove(f.object,n.id,h[p].fn);delete f.object.tau_events[n.id]}d.success(k)}},"unbind/3":function(d,
k,h){var f=h.args[0],n=h.args[1],p=h.args[2];if(a.type.is_variable(f)||a.type.is_variable(n))d.throwError(a.error.instantiation(h.indicator));else if(!a.type.is_dom_object(f))d.throwError(a.error.type("HTMLObject",f,h.indicator));else if(!a.type.is_atom(n))d.throwError(a.error.type("atom",n,h.indicator));else if(!a.type.is_variable(p)&&!a.type.is_term(p))d.throwError(a.error.type("term",p,h.indicator));else if(!a.type.is_variable(p)){if(f.object.tau_events&&f.object.tau_events[n.id]){h=f.object.tau_events[n.id];
for(var q=[],u=0;u<h.length;u++)null!==a.unify(h[u].goal,p)?m.remove(f.object,n.id,h[u].fn):q.push(h[u]);f.object.tau_events[n.id]=q}d.success(k)}},"event_property/3":function(d,k,h){var f=h.args[0],n=h.args[1],m=h.args[2];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_event_object(f)?a.type.is_atom(n)?a.type.is_variable(m)||a.type.is_atomic(m)?null!==f.event&&f.event[n.id]&&(h=f.event[n.id],h=isNaN(h)?new a.type.Term(h,[]):new a.type.Num(h),
d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[h,m])),k.substitution,k)])):d.throwError(a.error.type("atomic",m,h.indicator)):d.throwError(a.error.type("atom",n,h.indicator)):d.throwError(a.error.type("DOMEventObject",f,h.indicator))},"prevent_default/1":function(d,k,h){var f=h.args[0];a.type.is_variable(f)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_event_object(f)?null!==f.event&&(f.event.preventDefault(),d.success(k)):d.throwError(a.error.type("eventObject",
f,h.indicator))},"hide/1":function(d,k,h){var f=h.args[0];a.type.is_variable(f)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?(h=document.defaultView.getComputedStyle(f.object,"").display,void 0!==h&&"none"!==h&&(f.object.tau_display=h),f.object.style.display="none",d.success(k)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"show/1":function(d,k,h){var f=h.args[0];a.type.is_variable(f)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?(f.object.style.display=
void 0!==f.object.tau_display?f.object.tau_display:"block",d.success(k)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"toggle/1":[new a.type.Rule(new a.type.Term("toggle",[new a.type.Var("X")]),new a.type.Term(";",[new a.type.Term("->",[new a.type.Term(",",[new a.type.Term("style",[new a.type.Var("X"),new a.type.Term("display",[]),new a.type.Var("Y")]),new a.type.Term("=",[new a.type.Var("Y"),new a.type.Term("none",[])])]),new a.type.Term("show",[new a.type.Var("X")])]),new a.type.Term("hide",
[new a.type.Var("X")])]))],"get_by_id/2":function(d,k,h){var f=h.args[0],n=h.args[1];if(a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_atom(f))if(a.type.is_variable(n)||a.type.is_dom_object(n)){if(h=document.getElementById(f.id))h=new a.type.DOM(h),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[h,n])),k.substitution,k)])}else d.throwError(a.error.type("HTMLObject",n,h.indicator));else d.throwError(a.error.type("atom",f,h.indicator))},"get_by_class/2":function(d,
k,h){var f=h.args[0],n=h.args[1];if(a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_atom(f))if(a.type.is_variable(n)||a.type.is_dom_object(n)){if(h=document.getElementsByClassName(f.id)){f=[];for(var m=0;m<h.length;m++){var p=new a.type.DOM(h[m]);f.push(new a.type.State(k.goal.replace(new a.type.Term("=",[p,n])),k.substitution,k))}d.prepend(f)}}else d.throwError(a.error.type("HTMLObject",n,h.indicator));else d.throwError(a.error.type("atom",f,h.indicator))},
"get_by_tag/2":function(d,k,h){var f=h.args[0],n=h.args[1];if(a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_atom(f))if(a.type.is_variable(n)||a.type.is_dom_object(n)){if(h=document.getElementsByTagName(f.id)){f=[];for(var m=0;m<h.length;m++){var p=new a.type.DOM(h[m]);f.push(new a.type.State(k.goal.replace(new a.type.Term("=",[p,n])),k.substitution,k))}d.prepend(f)}}else d.throwError(a.error.type("HTMLObject",n,h.indicator));else d.throwError(a.error.type("atom",
f,h.indicator))},"style/3":function(d,k,h){var f=h.args[0],n=h.args[1],m=h.args[2],p=u(m),q=a.type.is_ground(m);a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_atom(n)?!a.type.is_variable(m)&&q&&!1===p?d.throwError(a.error.domain("style_value",m,h.indicator)):q?(f.object.style[n.id]=p,d.success(k)):(h=document.defaultView.getComputedStyle(f.object,"")[n.id]||"",""===h&&f.object.style[n.id]&&(h=f.object.style[n.id]),f=
w(h),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[m,f])),k.substitution,k)])):d.throwError(a.error.type("atom",n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"attr/3":function(d,k,h){var f=h.args[0],n=h.args[1],m=h.args[2],p=u(m),q=a.type.is_ground(m);a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_atom(n)?!a.type.is_variable(m)&&q&&!1===p?d.throwError(a.error.domain("attribute_value",
m,h.indicator)):q?("value"===n.id?f.object.value=p:f.object.setAttribute(n.id,p),d.success(k)):(h="value"===n.id?new a.type.Term(f.object.value):w(f.object.getAttribute(n.id)),null!==h&&void 0!==h&&d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[m,h])),k.substitution,k)])):d.throwError(a.error.type("atom",n,h.indicator)):d.throwError(a.error.type("HTMLObject",selector,h.indicator))},"html/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)?d.throwError(a.error.instantiation(h.indicator)):
a.type.is_variable(n)?(h=new a.type.Term(f.object.innerHTML),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[h,n])),k.substitution,k)])):(a.type.is_atom(n)?f.object.innerHTML=n.id:f.object.innerHTML=n.toString(),d.success(k))},"create/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)&&a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_variable(f)||a.type.is_atom(f)?a.type.is_variable(n)||a.type.is_dom_object(n)?a.type.is_variable(n)?
(f=new a.type.DOM(document.createElement(f.id)),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[n,f])),k.substitution,k)])):a.type.is_variable(n)?(f=new a.type.DOM(document.createElement(f.id.toLowerCase())),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[n,f])),k.substitution,k)])):a.type.is_variable(f)&&(n=new a.type.Term(n.object.nodeName.toLowerCase()),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[n,f])),k.substitution,k)])):d.throwError(a.error.type("HTMLObject",
n,h.indicator)):d.throwError(a.error.type("atom",f,h.indicator))},"parent_of/2":function(d,k,h){var f=h.args[0],n=h.args[1];if(a.type.is_variable(n)&&a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_variable(n)||a.type.is_dom_object(n))if(a.type.is_variable(f)||a.type.is_dom_object(f))if(a.type.is_variable(f)){h=n.object.children;n=[];for(var m=0;m<h.length;m++)n.push(new a.type.State(k.goal.replace(new a.type.Term("=",[f,new a.type.DOM(h[m])])),k.substitution,
k));d.prepend(n)}else f.object.parentNode&&d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[n,new a.type.DOM(f.object.parentNode)])),k.substitution,k)]);else d.throwError(a.error.type("HTMLObject",f,h.indicator));else d.throwError(a.error.type("HTMLObject",n,h.indicator))},"sibling/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)&&a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_variable(f)||a.type.is_dom_object(f)?a.type.is_variable(n)||
a.type.is_dom_object(n)?a.type.is_variable(f)&&n.object.previousElementSibling?(h=new a.type.DOM(n.object.previousElementSibling),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[f,h])),k.substitution,k)])):!a.type.is_variable(f)&&f.object.nextElementSibling&&(h=new a.type.DOM(f.object.nextElementSibling),d.prepend([new a.type.State(k.goal.replace(new a.type.Term("=",[n,h])),k.substitution,k)])):d.throwError(a.error.type("HTMLObject",n,h.indicator)):d.throwError(a.error.type("HTMLObject",
f,h.indicator))},"remove/1":function(d,k,h){var f=h.args[0];a.type.is_variable(f)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?f.object.parentNode&&(f.object.parentNode.removeChild(f.object),d.success(k)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"insert_after/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_dom_object(n)?n.object.parentNode&&
(n.object.parentNode.insertBefore(f.object,n.object.nextSibling),d.success(k)):d.throwError(a.error.type("HTMLObject",n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"insert_before/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_dom_object(n)?n.object.parentNode&&(n.object.parentNode.insertBefore(f.object,n.object),d.success(k)):d.throwError(a.error.type("HTMLObject",
n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"prepend_child/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_dom_object(n)?(f.object.firstChild?f.object.insertBefore(n.object,f.object.firstChild):f.object.appendChild(n.object),d.success(k)):d.throwError(a.error.type("HTMLObject",n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},
"append_child/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):a.type.is_dom_object(f)?a.type.is_dom_object(n)?(f.object.appendChild(n.object),d.success(k)):d.throwError(a.error.type("HTMLObject",n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"add_class/2":function(d,k,h){var f=h.args[0],n=h.args[1];a.type.is_variable(f)||a.type.is_variable(n)?d.throwError(a.error.instantiation(h.indicator)):
a.type.is_dom_object(f)?a.type.is_atom(n)?(-1===f.object.className.split(" ").indexOf(n.id)&&(f.object.className+=" "+n.id),d.success(k)):d.throwError(a.error.type("atom",n,h.indicator)):d.throwError(a.error.type("HTMLObject",f,h.indicator))},"remove_class/2":function(d,k,h){var f=h.args[0],n=h.args[1];if(a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));else if(a.type.is_dom_object(f))if(a.type.is_atom(n)||a.type.is_variable(n))if(h=f.object.className.split(" "),a.type.is_variable(n)){for(var m=
[],p=0;p<h.length;p++)m.push(new a.type.State(k.goal.replace(new a.type.Term(",",[new a.type.Term("=",[n,new a.type.Term(h[p],[])]),new a.type.Term("remove_class",[f,n])])),k.substitution,k));d.prepend(m)}else{m="";for(p=0;p<h.length;p++)h[p]!==n.id&&(m+=h[p]+" ");f.object.className=m;d.success(k)}else d.throwError(a.error.type("atom",n,h.indicator));else d.throwError(a.error.type("HTMLObject",f,h.indicator))},"hasClass/2":function(d,k,h){var f=h.args[0],m=h.args[1];if(a.type.is_variable(f))d.throwError(a.error.instantiation(h.indicator));
else if(a.type.is_dom_object(f))if(a.type.is_atom(m)||a.type.is_variable(m))if(h=f.object.className.split(" "),a.type.is_variable(m)){f=[];for(var p=0;p<h.length;p++)f.push(new a.type.State(k.goal.replace(new a.type.Term("=",[m,new a.type.Term(h[p],[])])),k.substitution,k));d.prepend(f)}else-1!==h.indexOf(m.id)&&d.success(k);else d.throwError(a.error.type("atom",m,h.indicator));else d.throwError(a.error.type("HTMLObject",f,h.indicator))}}},p="show/1 hide/1 toggle/1 create/2 get_by_id/2 get_by_tag/2 get_by_class/2 attr/3 style/3 html/2 parent_of/2 insert_after/2 insert_before/2 append_child/2 prepend_child/2 sibling/2 remove/1 add_class/2 remove_class/2 has_class/2 bind/4 unbind/2 unbind/3 event_property/3 prevent_default/1".split(" ");
a.type.is_dom_object=function(d){return d instanceof a.type.DOM};a.type.order.push(a.type.DOM);a.type.DOM=function(a){this.object=a};a.type.DOM.prototype.toString=function(){return"HTMLObject"+this.object.nodeName};a.type.DOM.prototype.clone=function(){return new a.type.DOM(this.object)};a.type.DOM.prototype.equals=function(d){return a.type.is_dom_object(d)&&this.object===d.object};a.type.DOM.prototype.rename=function(a){return this};a.type.DOM.prototype.variables=function(){return[]};a.type.DOM.prototype.apply=
function(a){return this};a.type.DOM.prototype.unify=function(d,k){return a.type.is_dom_object(d)&&this.object===d.object?new a.type.State(d,new a.type.Substitution):null};a.type.DOM.prototype.interpret=function(d){return a.error.instantiation(d)};a.type.DOM.prototype.compare=function(a){if(this.object===a.object)return 0;if(this.object<a.object)return-1;if(this.object>a.object)return 1};a.type.DOM.prototype.toJavaScript=function(){return this.object};a.fromJavaScript.test.dom=function(a){return a instanceof
HTMLElement};a.fromJavaScript.conversion.dom=function(d){return new a.type.DOM(d)};a.fromJavaScript.test.dom_collection=function(a){return a instanceof HTMLCollection};a.fromJavaScript.conversion.dom_collection=function(d){d=Array.prototype.slice.call(d,0);return a.fromJavaScript.apply(d)};a.type.is_dom_event_object=function(d){return d instanceof a.type.DOMEvent};a.type.order.push(a.type.DOMEvent);a.type.DOMEvent=function(a,k,h){this.type=a;this.event=k||null;this.epoch=h||(new Date).getTime()};
a.type.DOMEvent.prototype.toString=function(){return"eventObject"+this.type.toUpperCase()};a.type.DOMEvent.prototype.clone=function(){return new a.type.DOMEvent(this.type,this.event,this.epoch)};a.type.DOMEvent.prototype.equals=function(d){return a.type.is_dom_event_object(d)&&this.type===d.type&&this.epoch===d.epoch};a.type.DOMEvent.prototype.rename=function(a){return this};a.type.DOMEvent.prototype.variables=function(){return[]};a.type.DOMEvent.prototype.apply=function(a){return this};a.type.DOMEvent.prototype.unify=
function(d,k){return a.type.is_dom_event_object(d)&&this.type===d.type&&this.epoch===d.epoch?new a.type.State(d,new a.type.Substitution):null};a.type.DOMEvent.prototype.interpret=function(d){return a.error.instantiation(d)};a.type.DOMEvent.prototype.compare=function(a){if(this.epoch===a.epoch)return 0;if(this.epoch<a.epoch)return-1;if(this.epoch>a.epoch)return 1};a.type.DOMEvent.prototype.toJavaScript=function(){return this.event};a.fromJavaScript.test.event=function(a){return a instanceof Event};
a.fromJavaScript.conversion.event=function(d){return new a.type.DOMEvent(d.type,d)};var m=function(){var a={};return{add:function(d,h,f){if(void 0!==d.addEventListener)return d.addEventListener(h,f),!0;if(void 0!==d.attachEvent)return d.attachEvent("on"+h,f),!0;var k=d["on"+h],m=[];if(k){if(k.tau_fn_event===a)return-1===k.fns.indexOf(f)&&k.fns.push(f),!0;m.push(k)}m.push(f);d["on"+h]=function(a){for(var f=0;f<m.length;f++)m[f].call(d,a,d)};d["on"+h].fns=m;d["on"+h].tau_fn_event=a;return!0},remove:function(d,
h,f){if(d.removeEventListener)d.removeEventListener(h,f);else if(d.detachEvent)d.detachEvent("on"+h,f);else if(d["on"+h]){var k=d["on"+h];if(k===f)d["on"+h]=void 0;else if(k.tau_fn_event===a)for(d=0;d<k.fns.length;d++){if(k.fns[d]===f){k.fns.splice(d,1);break}}else return!1}return!0}}}();"undefined"!==typeof module?module.exports=function(d){a=d;new a.type.Module("dom",q(),p)}:new a.type.Module("dom",q(),p)})(pl);
(function(a){var u=function(){return{"global/1":function(q,p,m){q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[m.args[0],new a.type.JSValue(a.__env)])),p.substitution,p)])},"apply/3":[new a.type.Rule(new a.type.Term("apply",[new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")]),new a.type.Term(",",[new a.type.Term("global",[new a.type.Var("G")]),new a.type.Term("apply",[new a.type.Var("G"),new a.type.Var("X"),new a.type.Var("Y"),new a.type.Var("Z")])]))],"apply/4":function(q,
p,m){var d=m.args[0],k=m.args[1],h=m.args[2],f=m.args[3];a.type.is_variable(d)||a.type.is_variable(k)||a.type.is_variable(h)?q.throwError(a.error.instantiation(m.indicator)):a.type.is_atom(k)||a.type.is_js_object(k)&&"function"===typeof k.value?a.type.is_list(h)||q.throwError(a.error.type("list",h,m.indicator)):q.throwError(a.error.type("atom_or_JSValueFUNCTION",k,m.indicator));d=d.toJavaScript();k=a.type.is_atom(k)?d[k.id]:k.toJavaScript();if("function"===typeof k){for(var n=h,u,w=[];"./2"===n.indicator;){u=
n.args[0].toJavaScript();if(void 0===u){q.throwError(a.error.domain("javascript_object",n.args[0],m.indicator));return}w.push(u);n=n.args[1]}if(a.type.is_variable(n))q.throwError(a.error.instantiation(m.indicator));else if("[]/0"!==n.indicator)q.throwError(a.error.type("list",h,m.indicator));else{try{var E=k.apply(d,w)}catch(H){q.throwError(a.error.javascript(H.toString(),m.indicator));return}E=a.fromJavaScript.apply(E);q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[E,f])),p.substitution,
p)])}}},"prop/2":[new a.type.Rule(new a.type.Term("prop",[new a.type.Var("X"),new a.type.Var("Y")]),new a.type.Term(",",[new a.type.Term("global",[new a.type.Var("G")]),new a.type.Term("prop",[new a.type.Var("G"),new a.type.Var("X"),new a.type.Var("Y")])]))],"prop/3":function(q,p,m){var d=m.args[0],k=m.args[1],h=m.args[2];if(a.type.is_variable(d))q.throwError(a.error.instantiation(m.indicator));else if(a.type.is_variable(k)||a.type.is_atom(k))if(a.type.is_atom(k))m=d.toJavaScript()[k.id],void 0!==
m&&(m=a.fromJavaScript.apply(m),q.prepend([new a.type.State(p.goal.replace(new a.type.Term("=",[m,h])),p.substitution,p)]));else{m=d.toJavaScript();d=[];for(var f in m)if(m.hasOwnProperty(f)){var n=a.fromJavaScript.apply(m[f]);d.push(new a.type.State(p.goal.replace(new a.type.Term(",",[new a.type.Term("=",[n,h]),new a.type.Term("=",[new a.type.Term(f,[]),k])])),p.substitution,p))}q.prepend(d)}else q.throwError(a.error.type("atom",k,m.indicator))}}},w=["global/1","apply/3","apply/4","prop/2","prop/3"];
a.type.is_js_object=function(q){return q instanceof a.type.JSValue};a.type.order.push(a.type.JSValue);a.type.JSValue=function(a){this.value=a};a.type.JSValue.prototype.toString=function(){return"JSValue"+(typeof this.value).toUpperCase()};a.type.JSValue.prototype.clone=function(){return new a.type.JSValue(this.value)};a.type.JSValue.prototype.equals=function(q){return a.type.is_js_object(q)&&this.value===q.value};a.type.JSValue.prototype.rename=function(a){return this};a.type.JSValue.prototype.variables=
function(){return[]};a.type.JSValue.prototype.apply=function(a){return this};a.type.JSValue.prototype.unify=function(q,p){return a.type.is_js_object(q)&&this.value===q.value?new a.type.State(q,new a.type.Substitution):null};a.type.JSValue.prototype.interpret=function(q){return a.error.instantiation(q)};a.type.JSValue.prototype.compare=function(a){if(this.value===a.value)return 0;if(this.value<a.value)return-1;if(this.value>a.value)return 1};a.type.JSValue.prototype.toJavaScript=function(){return this.value};
a.fromJavaScript.conversion.any=function(q){return new a.type.JSValue(q)};a.error.javascript=function(q,p){return new a.type.Term("error",[new a.type.Term("javascript_error",[new a.type.Term(q)]),a.utils.str_indicator(p)])};"undefined"!==typeof module?module.exports=function(q){a=q;new a.type.Module("js",u(),w)}:new a.type.Module("js",u(),w)})(pl);
